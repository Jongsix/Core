"use strict";

/*
 * Copyright Â© MIKO LLC - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Alexey Portnov, 8 2020
 */

/* global sessionStorage, ace, PbxApi */
var systemDiagnostic = {
  $startBtn: $('#start-capture-button'),
  $stopBtn: $('#stop-capture-button'),
  $showBtn: $('#show-last-log'),
  viewer: '',
  $tabMenuItems: $('#system-diagnostic-menu .item'),
  $fileSelectDropDown: $('#system-diagnostic-form .type-select'),
  initialize: function () {
    function initialize() {
      systemDiagnostic.$tabMenuItems.tab();
      systemDiagnostic.$tabMenuItems.tab('change tab', 'show-log');
      systemDiagnostic.$fileSelectDropDown.dropdown({
        onChange: function () {
          function onChange() {// customFile.getFileContentFromServer();
          }

          return onChange;
        }()
      });
      systemDiagnostic.$showBtn.on('click', function (e) {
        e.preventDefault();
        var Lines = $('#lines').val();

        if (!jQuery.isNumeric(Lines)) {
          Lines = 500;
        }

        PbxApi.GetLogFromFile($('#filenames').val(), $('#filter').val(), Lines, systemDiagnostic.cbUpdateLogText);
      });

      if (sessionStorage.getItem('LogsCaptureStatus') === 'started') {
        systemDiagnostic.$startBtn.addClass('disabled loading');
        systemDiagnostic.$stopBtn.removeClass('disabled');
      } else {
        systemDiagnostic.$startBtn.removeClass('disabled loading');
        systemDiagnostic.$stopBtn.addClass('disabled');
      }

      systemDiagnostic.$startBtn.on('click', function (e) {
        e.preventDefault();
        systemDiagnostic.$startBtn.addClass('disabled loading');
        systemDiagnostic.$stopBtn.removeClass('disabled');
        PbxApi.SystemStartLogsCapture();
      });
      systemDiagnostic.$stopBtn.on('click', function (e) {
        e.preventDefault();
        systemDiagnostic.$startBtn.removeClass('disabled loading');
        systemDiagnostic.$stopBtn.addClass('disabled');
        PbxApi.SystemStopLogsCapture(systemDiagnostic.cbAfterStopLogsCapture);
      });
      systemDiagnostic.initializeAce();
    }

    return initialize;
  }(),
  initializeAce: function () {
    function initializeAce() {
      var IniMode = ace.require('ace/mode/julia').Mode;

      systemDiagnostic.viewer = ace.edit('application-code-readonly');
      systemDiagnostic.viewer.setReadOnly(true);
      systemDiagnostic.viewer.session.setMode(new IniMode());
      systemDiagnostic.viewer.setTheme('ace/theme/monokai');
      systemDiagnostic.viewer.resize();
      var $codeElement = $('#application-code-readonly');
      var Length = $codeElement.height() * 0.80;
      $codeElement.height(Length);
      $('.ace_gutter').hide();
      setTimeout(systemDiagnostic.cbUpdateLogText, 2000);
    }

    return initializeAce;
  }(),
  cbAfterStopLogsCapture: function () {
    function cbAfterStopLogsCapture(response) {// console.log(response);
    }

    return cbAfterStopLogsCapture;
  }(),
  cbUpdateLogText: function () {
    function cbUpdateLogText(data) {
      if (typeof data !== 'undefined' && data.length > 0) {
        systemDiagnostic.viewer.setValue(data[0]);
      }

      systemDiagnostic.viewer.gotoLine($('#lines').val());
    }

    return cbUpdateLogText;
  }()
};
$(document).ready(function () {
  systemDiagnostic.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TeXN0ZW1EaWFnbm9zdGljL3N5c3RlbS1kaWFnbm9zdGljLWluZGV4LmpzIl0sIm5hbWVzIjpbInN5c3RlbURpYWdub3N0aWMiLCIkc3RhcnRCdG4iLCIkIiwiJHN0b3BCdG4iLCIkc2hvd0J0biIsInZpZXdlciIsIiR0YWJNZW51SXRlbXMiLCIkZmlsZVNlbGVjdERyb3BEb3duIiwiaW5pdGlhbGl6ZSIsInRhYiIsImRyb3Bkb3duIiwib25DaGFuZ2UiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIkxpbmVzIiwidmFsIiwialF1ZXJ5IiwiaXNOdW1lcmljIiwiUGJ4QXBpIiwiR2V0TG9nRnJvbUZpbGUiLCJjYlVwZGF0ZUxvZ1RleHQiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiU3lzdGVtU3RhcnRMb2dzQ2FwdHVyZSIsIlN5c3RlbVN0b3BMb2dzQ2FwdHVyZSIsImNiQWZ0ZXJTdG9wTG9nc0NhcHR1cmUiLCJpbml0aWFsaXplQWNlIiwiSW5pTW9kZSIsImFjZSIsInJlcXVpcmUiLCJNb2RlIiwiZWRpdCIsInNldFJlYWRPbmx5Iiwic2Vzc2lvbiIsInNldE1vZGUiLCJzZXRUaGVtZSIsInJlc2l6ZSIsIiRjb2RlRWxlbWVudCIsIkxlbmd0aCIsImhlaWdodCIsImhpZGUiLCJzZXRUaW1lb3V0IiwicmVzcG9uc2UiLCJkYXRhIiwibGVuZ3RoIiwic2V0VmFsdWUiLCJnb3RvTGluZSIsImRvY3VtZW50IiwicmVhZHkiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFNQTtBQUVBLElBQU1BLGdCQUFnQixHQUFHO0FBQ3hCQyxFQUFBQSxTQUFTLEVBQUVDLENBQUMsQ0FBQyx1QkFBRCxDQURZO0FBRXhCQyxFQUFBQSxRQUFRLEVBQUdELENBQUMsQ0FBQyxzQkFBRCxDQUZZO0FBR3hCRSxFQUFBQSxRQUFRLEVBQUdGLENBQUMsQ0FBQyxnQkFBRCxDQUhZO0FBSXhCRyxFQUFBQSxN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QyxRQUF4QixDQUFpQy9DLENBQUMsQ0FBQyxRQUFELENBQUQsQ0FBWWMsR0FBWixFQUFqQztBQUNBOztBQXhFdUI7QUFBQTtBQUFBLENBQXpCO0FBMkVBZCxDQUFDLENBQUNnRCxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixZQUFNO0FBQ3ZCbkQsRUFBQUEsZ0JBQWdCLENBQUNRLFVBQWpCO0FBQ0EsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgwqkgTUlLTyBMTEMgLSBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiBVbmF1dGhvcml6ZWQgY29weWluZyBvZiB0aGlzIGZpbGUsIHZpYSBhbnkgbWVkaXVtIGlzIHN0cmljdGx5IHByb2hpYml0ZWRcbiAqIFByb3ByaWV0YXJ5IGFuZCBjb25maWRlbnRpYWxcbiAqIFdyaXR0ZW4gYnkgQWxleGV5IFBvcnRub3YsIDggMjAyMFxuICovXG4vKiBnbG9iYWwgc2Vzc2lvblN0b3JhZ2UsIGFjZSwgUGJ4QXBpICovXG5cbmNvbnN0IHN5c3RlbURpYWdub3N0aWMgPSB7XG5cdCRzdGFydEJ0bjogJCgnI3N0YXJ0LWNhcHR1cmUtYnV0dG9uJyksXG5cdCRzdG9wQnRuOiAgJCgnI3N0b3AtY2FwdHVyZS1idXR0b24nKSxcblx0JHNob3dCdG46ICAkKCcjc2hvdy1sYXN0LWxvZycpLFxuXHR2aWV3ZXI6ICcnLFxuXHQkdGFiTWVudUl0ZW1zOiAkKCcjc3lzdGVtLWRpYWdub3N0aWMtbWVudSAuaXRlbScpLFxuXHQkZmlsZVNlbGVjdERyb3BEb3duOiAkKCcjc3lzdGVtLWRpYWdub3N0aWMtZm9ybSAudHlwZS1zZWxlY3QnKSxcblxuXHRpbml0aWFsaXplKCkge1xuXHRcdHN5c3RlbURpYWdub3N0aWMuJHRhYk1lbnVJdGVtcy50YWIoKTtcblx0XHRzeXN0ZW1EaWFnbm9zdGljLiR0YWJNZW51SXRlbXMudGFiKCdjaGFuZ2UgdGFiJywgJ3Nob3ctbG9nJyk7XG5cblx0XHRzeXN0ZW1EaWFnbm9zdGljLiRmaWxlU2VsZWN0RHJvcERvd24uZHJvcGRvd24oe1xuXHRcdFx0b25DaGFuZ2UoKSB7XG5cdFx0XHRcdC8vIGN1c3RvbUZpbGUuZ2V0RmlsZUNvbnRlbnRGcm9tU2VydmVyKCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0c3lzdGVtRGlhZ25vc3RpYy4kc2hvd0J0bi5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bGV0IExpbmVzID0gJCgnI2xpbmVzJykudmFsKCk7XG5cdFx0XHRpZighalF1ZXJ5LmlzTnVtZXJpYyggTGluZXMpKXtcblx0XHRcdFx0TGluZXMgPSA1MDA7XG5cdFx0XHR9XG5cdFx0XHRQYnhBcGkuR2V0TG9nRnJvbUZpbGUoJCgnI2ZpbGVuYW1lcycpLnZhbCgpLCAkKCcjZmlsdGVyJykudmFsKCksIExpbmVzICwgc3lzdGVtRGlhZ25vc3RpYy5jYlVwZGF0ZUxvZ1RleHQpXG5cdFx0fSk7XG5cblx0XHRpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnTG9nc0NhcHR1cmVTdGF0dXMnKSA9PT0gJ3N0YXJ0ZWQnKSB7XG5cdFx0XHRzeXN0ZW1EaWFnbm9zdGljLiRzdGFydEJ0bi5hZGRDbGFzcygnZGlzYWJsZWQgbG9hZGluZycpO1xuXHRcdFx0c3lzdGVtRGlhZ25vc3RpYy4kc3RvcEJ0bi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3lzdGVtRGlhZ25vc3RpYy4kc3RhcnRCdG4ucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkIGxvYWRpbmcnKTtcblx0XHRcdHN5c3RlbURpYWdub3N0aWMuJHN0b3BCdG4uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0fVxuXHRcdHN5c3RlbURpYWdub3N0aWMuJHN0YXJ0QnRuLm9uKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRzeXN0ZW1EaWFnbm9zdGljLiRzdGFydEJ0bi5hZGRDbGFzcygnZGlzYWJsZWQgbG9hZGluZycpO1xuXHRcdFx0c3lzdGVtRGlhZ25vc3RpYy4kc3RvcEJ0bi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFBieEFwaS5TeXN0ZW1TdGFydExvZ3NDYXB0dXJlKCk7XG5cdFx0fSk7XG5cdFx0c3lzdGVtRGlhZ25vc3RpYy4kc3RvcEJ0bi5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0c3lzdGVtRGlhZ25vc3RpYy4kc3RhcnRCdG4ucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkIGxvYWRpbmcnKTtcblx0XHRcdHN5c3RlbURpYWdub3N0aWMuJHN0b3BCdG4uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0XHRQYnhBcGkuU3lzdGVtU3RvcExvZ3NDYXB0dXJlKHN5c3RlbURpYWdub3N0aWMuY2JBZnRlclN0b3BMb2dzQ2FwdHVyZSk7XG5cdFx0fSk7XG5cblx0XHRzeXN0ZW1EaWFnbm9zdGljLmluaXRpYWxpemVBY2UoKTtcblx0fSxcblx0aW5pdGlhbGl6ZUFjZSgpIHtcblx0XHRjb25zdCBJbmlNb2RlID0gYWNlLnJlcXVpcmUoJ2FjZS9tb2RlL2p1bGlhJykuTW9kZTtcblx0XHRzeXN0ZW1EaWFnbm9zdGljLnZpZXdlciA9IGFjZS5lZGl0KCdhcHBsaWNhdGlvbi1jb2RlLXJlYWRvbmx5Jyk7XG5cdFx0c3lzdGVtRGlhZ25vc3RpYy52aWV3ZXIuc2V0UmVhZE9ubHkodHJ1ZSk7XG5cdFx0c3lzdGVtRGlhZ25vc3RpYy52aWV3ZXIuc2Vzc2lvbi5zZXRNb2RlKG5ldyBJbmlNb2RlKCkpO1xuXHRcdHN5c3RlbURpYWdub3N0aWMudmlld2VyLnNldFRoZW1lKCdhY2UvdGhlbWUvbW9ub2thaScpO1xuXHRcdHN5c3RlbURpYWdub3N0aWMudmlld2VyLnJlc2l6ZSgpO1xuXG5cdFx0Y29uc3QgJGNvZGVFbGVtZW50ID0gJCgnI2FwcGxpY2F0aW9uLWNvZGUtcmVhZG9ubHknKTtcblx0XHRjb25zdCBMZW5ndGggPSAkY29kZUVsZW1lbnQuaGVpZ2h0KCkgKiAwLjgwO1xuXHRcdCRjb2RlRWxlbWVudC5oZWlnaHQoTGVuZ3RoKTtcblx0XHQkKCcuYWNlX2d1dHRlcicpLmhpZGUoKTtcblxuXHRcdHNldFRpbWVvdXQoc3lzdGVtRGlhZ25vc3RpYy5jYlVwZGF0ZUxvZ1RleHQsIDIwMDApO1xuXHR9LFxuXHRjYkFmdGVyU3RvcExvZ3NDYXB0dXJlKHJlc3BvbnNlKSB7XG5cdFx0Ly8gY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHR9LFxuXHRjYlVwZGF0ZUxvZ1RleHQoZGF0YSkge1xuXHRcdGlmICh0eXBlb2YgKGRhdGEpICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhLmxlbmd0aCA+IDApIHtcblx0XHRcdHN5c3RlbURpYWdub3N0aWMudmlld2VyLnNldFZhbHVlKGRhdGFbMF0pO1xuXHRcdH1cblx0XHRzeXN0ZW1EaWFnbm9zdGljLnZpZXdlci5nb3RvTGluZSgkKCcjbGluZXMnKS52YWwoKSlcblx0fSxcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0c3lzdGVtRGlhZ25vc3RpYy5pbml0aWFsaXplKCk7XG59KTtcblxuIl19