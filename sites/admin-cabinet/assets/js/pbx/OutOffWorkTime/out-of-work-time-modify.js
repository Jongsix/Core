"use strict";

/*
 * Copyright (C) MIKO LLC - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Nikolay Beketov, 12 2019
 *
 */

/* global globalRootUrl,globalTranslate, Extensions, Form, SemanticLocalization */
$.fn.form.settings.rules.customNotEmptyIfActionRule = function (value, action) {
  if (value.length === 0 && $('#action').val() === action) {
    return false;
  }

  return true;
};

var outOfWorkTimeRecord = {
  $formObj: $('#save-outoffwork-form'),
  $defaultDropdown: $('#save-outoffwork-form .dropdown-default'),
  $rangeDaysStart: $('#range-days-start'),
  $rangeDaysEnd: $('#range-days-end'),
  $rangeTimeStart: $('#range-time-start'),
  $rangeTimeEnd: $('#range-time-end'),
  $date_from: $('#date_from'),
  $date_to: $('#date_to'),
  $time_to: $('#time_to'),
  $forwardingSelectDropdown: $('#save-outoffwork-form .forwarding-select'),
  validateRules: {
    audio_message_id: {
      identifier: 'audio_message_id',
      rules: [{
        type: 'customNotEmptyIfActionRule[playmessage]',
        prompt: globalTranslate.tf_ValidateAudioMessageEmpty
      }]
    },
    extension: {
      identifier: 'extension',
      rules: [{
        type: 'customNotEmptyIfActionRule[extension]',
        prompt: globalTranslate.tf_ValidateExtensionEmpty
      }]
    },
    timefrom: {
      optional: true,
      identifier: 'time_from',
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    },
    timeto: {
      identifier: 'time_to',
      optional: true,
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    }
  },
  initialize: function () {
    function initialize() {
      outOfWorkTimeRecord.$defaultDropdown.dropdown();
      outOfWorkTimeRecord.$rangeDaysStart.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        endCalendar: outOfWorkTimeRecord.$rangeDaysEnd,
        type: 'date',
        inline: false,
        monthFirst: false,
        regExp: SemanticLocalization.regExp
      });
      outOfWorkTimeRecord.$rangeDaysEnd.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        startCalendar: outOfWorkTimeRecord.$rangeDaysStart,
        type: 'date',
        inline: false,
        monthFirst: false,
        regExp: SemanticLocalization.regExp,
        onChange: function () {
          function onChange(newDateTo) {
            var oldDateTo = outOfWorkTimeRecord.$date_to.attr('value');

            if (newDateTo !== null && oldDateTo !== '') {
              oldDateTo = new Date(oldDateTo * 1000);

              if (newDateTo - oldDateTo !== 0) {
                outOfWorkTimeRecord.$date_from.trigger('change');
              }
            }
          }

          return onChange;
        }()
      });
      outOfWorkTimeRecord.$rangeTimeStart.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        endCalendar: outOfWorkTimeRecord.$rangeTimeEnd,
        type: 'time',
        inline: false,
        disableMinute: true,
        ampm: false
      });
      outOfWorkTimeRecord.$rangeTimeEnd.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        startCalendar: outOfWorkTimeRecord.$rangeTimeStart,
        type: 'time',
        inline: false,
        disableMinute: true,
        ampm: false,
        onChange: function () {
          function onChange(newTimeTo) {
            var oldTimeTo = outOfWorkTimeRecord.$time_to.attr('value');

            if (newTimeTo !== null && oldTimeTo !== '') {
              oldTimeTo = new Date(oldTimeTo * 1000);

              if (newTimeTo - oldTimeTo !== 0) {
                outOfWorkTimeRecord.$time_to.trigger('change');
              }
            }
          }

          return onChange;
        }()
      });
      $('#action').dropdown({
        onChange: function () {
          function onChange() {
            outOfWorkTimeRecord.toggleDisabledFieldClass();
          }

          return onChange;
        }()
      });
      $('#weekday_from').dropdown({
        onChange: function () {
          function onChange() {
            var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
            var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

            if (from < to || to === -1 || from === -1) {
              outOfWorkTimeRecord.$formObj.form('set value', 'weekday_to', from);
            }
          }

          return onChange;
        }()
      });
      $('#weekday_to').dropdown({
        onChange: function () {
          function onChange() {
            var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
            var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

            if (to < from || from === -1) {
              outOfWorkTimeRecord.$formObj.form('set value', 'weekday_from', to);
            }
          }

          return onChange;
        }()
      });
      $('#erase-dates').on('click', function (e) {
        outOfWorkTimeRecord.$rangeDaysStart.calendar('clear');
        outOfWorkTimeRecord.$rangeDaysEnd.calendar('clear');
        outOfWorkTimeRecord.$formObj.form('set values', {
          date_from: '',
          date_to: ''
        });
        e.preventDefault();
      });
      $('#erase-weekdays').on('click', function (e) {
        outOfWorkTimeRecord.$formObj.form('set values', {
          weekday_from: -1,
          weekday_to: -1
        });
        outOfWorkTimeRecord.$rangeDaysStart.trigger('change');
        e.preventDefault();
      });
      $('#erase-timeperiod').on('click', function (e) {
        outOfWorkTimeRecord.$rangeTimeStart.calendar('clear');
        outOfWorkTimeRecord.$rangeTimeEnd.calendar('clear');
        outOfWorkTimeRecord.$time_to.trigger('change');
        e.preventDefault();
      });
      outOfWorkTimeRecord.initializeForm();
      outOfWorkTimeRecord.$forwardingSelectDropdown.dropdown(Extensions.getDropdownSettingsWithoutEmpty());
      outOfWorkTimeRecord.toggleDisabledFieldClass();
      outOfWorkTimeRecord.changeDateFormat();
    }

    return initialize;
  }(),

  /**
   * Меняет представление даты начала и даты окончания из linuxtime в локальное представление
   */
  changeDateFormat: function () {
    function changeDateFormat() {
      var dateFrom = outOfWorkTimeRecord.$date_from.attr('value');
      var dateTo = outOfWorkTimeRecord.$date_to.attr('value');

      if (dateFrom !== undefined && dateFrom.length > 0) {
        outOfWorkTimeRecord.$rangeDaysStart.calendar('set date', new Date(dateFrom * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_from', dateFrom);
      }

      if (dateTo !== undefined && dateTo.length > 0) {
        outOfWorkTimeRecord.$rangeDaysEnd.calendar('set date', new Date(dateTo * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_to', dateTo);
      }
    }

    return changeDateFormat;
  }(),
  toggleDisabledFieldClass: function () {
    function toggleDisabledFieldClass() {
      if (outOfWorkTimeRecord.$formObj.form('get value', 'action') === 'extension') {
        $('#extension-group').show();
        $('#audio-file-group').hide();
        $('#audio_message_id').dropdown('clear');
      } else {
        $('#extension-group').hide();
        $('#audio-file-group').show();
        outOfWorkTimeRecord.$formObj.form('set value', 'extension', -1);
      }
    }

    return toggleDisabledFieldClass;
  }(),

  /**
   * Кастомная проверка полей формы, которые не получается сделать через валидацию
   * @param result
   * @returns {*}
   */
  customValidateForm: function () {
    function customValidateForm(result) {
      // Проверим поля даты
      if (result.data.date_from !== '' && result.data.date_to === '' || result.data.date_to !== '' && result.data.date_from === '') {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckDateInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля дней недели


      if (result.data.weekday_from > 0 && result.data.weekday_to === '-1' || result.data.weekday_to > 0 && result.data.weekday_from === '-1') {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckWeekDayInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля времени


      if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля времени на соблюдение формату


      if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим все поля


      if (result.data.time_from === '' && result.data.time_to === '' && result.data.weekday_from === '-1' && result.data.weekday_to === '-1' && result.data.date_from === '' && result.data.date_to === '') {
        $('.form .error.message').html(globalTranslate.tf_ValidateNoRulesSelected).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      }

      return result;
    }

    return customValidateForm;
  }(),
  cbBeforeSendForm: function () {
    function cbBeforeSendForm(settings) {
      var result = settings;
      $('.form .error.message').html('').hide();
      result.data = outOfWorkTimeRecord.$formObj.form('get values');
      var dateFrom = outOfWorkTimeRecord.$rangeDaysStart.calendar('get date');

      if (dateFrom !== null) {
        dateFrom.setHours(0, 0, 0, 0);
        result.data.date_from = Math.round(dateFrom.getTime() / 1000);
      }

      var dateTo = outOfWorkTimeRecord.$rangeDaysEnd.calendar('get date');

      if (dateTo !== null) {
        dateTo.setHours(23, 59, 59, 0);
        result.data.date_to = Math.round(dateTo.getTime() / 1000);
      }

      return outOfWorkTimeRecord.customValidateForm(result);
    }

    return cbBeforeSendForm;
  }(),
  cbAfterSendForm: function () {
    function cbAfterSendForm() {}

    return cbAfterSendForm;
  }(),
  initializeForm: function () {
    function initializeForm() {
      Form.$formObj = outOfWorkTimeRecord.$formObj;
      Form.url = "".concat(globalRootUrl, "out-off-work-time/save");
      Form.validateRules = outOfWorkTimeRecord.validateRules;
      Form.cbBeforeSendForm = outOfWorkTimeRecord.cbBeforeSendForm;
      Form.cbAfterSendForm = outOfWorkTimeRecord.cbAfterSendForm;
      Form.initialize();
    }

    return initializeForm;
  }()
};
$(document).ready(function () {
  outOfWorkTimeRecord.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9PdXRPZmZXb3JrVGltZS9vdXQtb2Ytd29yay10aW1lLW1vZGlmeS5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJmb3JtIiwic2V0dGluZ3MiLCJydWxlcyIsImN1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlIiwidmFsdWUiLCJhY3Rpb24iLCJsZW5ndGgiLCJ2YWwiLCJvdXRPZldvcmtUaW1lUmVjb3JkIiwiJGZvcm1PYmoiLCIkZGVmYXVsdERyb3Bkb3duIiwiJHJhbmdlRGF5c1N0YXJ0IiwiJHJhbmdlRGF5c0VuZCIsIiRyYW5nZVRpbWVTdGFydCIsIiRyYW5nZVRpbWVFbmQiLCIkZGF0ZV9mcm9tIiwiJGRhdGVfdG8iLCIkdGltZV90byIsIiRmb3J3YXJkaW5nU2VsZWN0RHJvcGRvd24iLCJ2YWxpZGF0ZVJ1bGVzIiwiYXVkaW9fbWVzc2FnZV9pZCIsImlkZW50aWZpZXIiLCJ0eXBlIiwicHJvbXB0IiwiZ2xvYmFsVHJhbnNsYXRlIiwidGZfVmFsaWRhdGVBdWRpb01lc3NhZ2VFbXB0eSIsImV4dGVuc2lvbiIsInRmX1ZhbGlkYXRlRXh0ZW5zaW9uRW1wdHkiLCJ0aW1lZnJvbSIsIm9wdGlvbmFsIiwidGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCIsInRpbWV0byIsImluaXRpYWxpemUiLCJkcm9wZG93biIsImNhbGVuZGFyIiwiZmlyc3REYXlPZldlZWsiLCJTZW1hbnRpY0xvY2FsaXphdGlvbiIsImNhbGVuZGFyRmlyc3REYXlPZldlZWsiLCJ0ZXh0IiwiY2FsZW5kYXJUZXh0IiwiZW5kQ2FsZW5kYXIiLCJpbmxpbmUiLCJtb250aEZpcnN0IiwicmVnRXhwIiwic3RhcnRDYWxlbmRhciIsIm9uQ2hhbmdlIiwibmV3RGF0ZVRvIiwib2xkRGF0ZVRvIiwiYXR0ciIsIkRhdGUiLCJ0cmlnZ2VyIiwiZGlzYWJsZU1pbnV0ZSIsImFtcG0iLCJuZXdUaW1lVG8iLCJvbGRUaW1lVG8iLCJ0b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MiLCJmcm9tIiwidG8iLCJvbiIsImUiLCJkYXRlX2Zyb20iLCJkYXRlX3RvIiwicHJldmVudERlZmF1bHQiLCJ3ZWVrZGF5X2Zyb20iLCJ3ZWVrZGF5X3RvIiwiaW5pdGlhbGl6ZUZvcm0iLCJFeHRlbnNpb25zIiwiZ2V0RHJvcGRvd25TZXR0aW5nc1dpdGhvdXRFbXB0eSIsImNoYW5nZURhdGVGb3JtYXQiLCJkYXRlRnJvbSIsImRhdGVUbyIsInVuZGVmaW5lZCIsInNob3ciLCJoaWRlIiwiY3VzdG9tVmFsaWRhdGVGb3JtIiwicmVzdWx0IiwiZGF0YSIsImh0bWwiLCJ0Zl9WYWxpZGF0ZUNoZWNrRGF0ZUludGVydmFsIiwiRm9ybSIsIiRzdWJtaXRCdXR0b24iLCJ0cmFuc2l0aW9uIiwicmVtb3ZlQ2xhc3MiLCJ0Zl9WYWxpZGF0ZUNoZWNrV2Vla0RheUludGVydmFsIiwidGltZV9mcm9tIiwidGltZV90byIsInRmX1ZhbGlkYXRlTm9SdWxlc1NlbGVjdGVkIiwiY2JCZWZvcmVTZW5kRm9ybSIsInNldEhvdXJzIiwiTWF0aCIsInJvdW5kIiwiZ2V0VGltZSIsImNiQWZ0ZXJTZW5kRm9ybSIsInVybCIsImdsb2JhbFJvb3RVcmwiLCJkb2N1bWVudCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7OztBQVFBO0FBR0FBLENBQUMsQ0FBQ0MsRUFBRixDQUFLQyxJQUFMLENBQVVDLFFBQVYsQ0FBbUJDLEtBQW5CLENBQXlCQywwQkFBekIsR0FBc0QsVUFBQ0MsS0FBRCxFQUFRQyxNQUFSLEVBQW1CO0FBQ3hFLE1BQUlELEtBQUssQ0FBQ0UsTUFBTixLQUFpQixDQUFqQixJQUFzQlIsQ0FBQyxDQUFDLFNBQUQsQ0FBRCxDQUFhUyxHQUFiLE9BQXVCRixNQUFqRCxFQUF5RDtBQUN4RCxXQUFPLEtBQVA7QUFDQTs7QUFDRCxTQUFPLElBQVA7QUFDQSxDQUxEOztBQU9BLElBQU1HLG1CQUFtQixHQUFHO0FBQzNCQyxFQUFBQSxRQUFRLEVBQUVYLENBQUMsQ0FBQyx1QkFBRCxDQURnQjtBQUUzQlksRUFB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QUFBQSxJQUFJLENBQUM1RCxhQUFMLEdBQXFCWCxtQkFBbUIsQ0FBQ1csYUFBekM7QUFDQTRELE1BQUFBLElBQUksQ0FBQ1EsZ0JBQUwsR0FBd0IvRSxtQkFBbUIsQ0FBQytFLGdCQUE1QztBQUNBUixNQUFBQSxJQUFJLENBQUNhLGVBQUwsR0FBdUJwRixtQkFBbUIsQ0FBQ29GLGVBQTNDO0FBQ0FiLE1BQUFBLElBQUksQ0FBQy9DLFVBQUw7QUFDQTs7QUF6UTBCO0FBQUE7QUFBQSxDQUE1QjtBQTRRQWxDLENBQUMsQ0FBQ2lHLFFBQUQsQ0FBRCxDQUFZQyxLQUFaLENBQWtCLFlBQU07QUFDdkJ4RixFQUFBQSxtQkFBbUIsQ0FBQ3dCLFVBQXBCO0FBQ0EsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKEMpIE1JS08gTExDIC0gQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogVW5hdXRob3JpemVkIGNvcHlpbmcgb2YgdGhpcyBmaWxlLCB2aWEgYW55IG1lZGl1bSBpcyBzdHJpY3RseSBwcm9oaWJpdGVkXG4gKiBQcm9wcmlldGFyeSBhbmQgY29uZmlkZW50aWFsXG4gKiBXcml0dGVuIGJ5IE5pa29sYXkgQmVrZXRvdiwgMTIgMjAxOVxuICpcbiAqL1xuXG4vKiBnbG9iYWwgZ2xvYmFsUm9vdFVybCxnbG9iYWxUcmFuc2xhdGUsIEV4dGVuc2lvbnMsIEZvcm0sIFNlbWFudGljTG9jYWxpemF0aW9uICovXG5cblxuJC5mbi5mb3JtLnNldHRpbmdzLnJ1bGVzLmN1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlID0gKHZhbHVlLCBhY3Rpb24pID0+IHtcblx0aWYgKHZhbHVlLmxlbmd0aCA9PT0gMCAmJiAkKCcjYWN0aW9uJykudmFsKCkgPT09IGFjdGlvbikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn07XG5cbmNvbnN0IG91dE9mV29ya1RpbWVSZWNvcmQgPSB7XG5cdCRmb3JtT2JqOiAkKCcjc2F2ZS1vdXRvZmZ3b3JrLWZvcm0nKSxcblx0JGRlZmF1bHREcm9wZG93bjogJCgnI3NhdmUtb3V0b2Zmd29yay1mb3JtIC5kcm9wZG93bi1kZWZhdWx0JyksXG5cdCRyYW5nZURheXNTdGFydDogJCgnI3JhbmdlLWRheXMtc3RhcnQnKSxcblx0JHJhbmdlRGF5c0VuZDogJCgnI3JhbmdlLWRheXMtZW5kJyksXG5cdCRyYW5nZVRpbWVTdGFydDogJCgnI3JhbmdlLXRpbWUtc3RhcnQnKSxcblx0JHJhbmdlVGltZUVuZDogJCgnI3JhbmdlLXRpbWUtZW5kJyksXG5cdCRkYXRlX2Zyb206ICQoJyNkYXRlX2Zyb20nKSxcblx0JGRhdGVfdG86ICQoJyNkYXRlX3RvJyksXG5cdCR0aW1lX3RvOiAkKCcjdGltZV90bycpLFxuXHQkZm9yd2FyZGluZ1NlbGVjdERyb3Bkb3duOiAkKCcjc2F2ZS1vdXRvZmZ3b3JrLWZvcm0gLmZvcndhcmRpbmctc2VsZWN0JyksXG5cdHZhbGlkYXRlUnVsZXM6IHtcblx0XHRhdWRpb19tZXNzYWdlX2lkOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAnYXVkaW9fbWVzc2FnZV9pZCcsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2N1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlW3BsYXltZXNzYWdlXScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVBdWRpb01lc3NhZ2VFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRleHRlbnNpb246IHtcblx0XHRcdGlkZW50aWZpZXI6ICdleHRlbnNpb24nLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdjdXN0b21Ob3RFbXB0eUlmQWN0aW9uUnVsZVtleHRlbnNpb25dJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUV4dGVuc2lvbkVtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdHRpbWVmcm9tOiB7XG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdGlkZW50aWZpZXI6ICd0aW1lX2Zyb20nLFxuXHRcdFx0cnVsZXM6IFt7XG5cdFx0XHRcdHR5cGU6ICdyZWdFeHAnLFxuXHRcdFx0XHR2YWx1ZTogL14oMlswLTNdfDE/WzAtOV0pOihbMC01XT9bMC05XSkkLyxcblx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCxcblx0XHRcdH1dLFxuXHRcdH0sXG5cdFx0dGltZXRvOiB7XG5cdFx0XHRpZGVudGlmaWVyOiAndGltZV90bycsXG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdHJ1bGVzOiBbe1xuXHRcdFx0XHR0eXBlOiAncmVnRXhwJyxcblx0XHRcdFx0dmFsdWU6IC9eKDJbMC0zXXwxP1swLTldKTooWzAtNV0/WzAtOV0pJC8sXG5cdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tUaW1lSW50ZXJ2YWwsXG5cdFx0XHR9XSxcblx0XHR9LFxuXHR9LFxuXHRpbml0aWFsaXplKCkge1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGRlZmF1bHREcm9wZG93bi5kcm9wZG93bigpO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LmNhbGVuZGFyKHtcblx0XHRcdGZpcnN0RGF5T2ZXZWVrOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhckZpcnN0RGF5T2ZXZWVrLFxuXHRcdFx0dGV4dDogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJUZXh0LFxuXHRcdFx0ZW5kQ2FsZW5kYXI6IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZCxcblx0XHRcdHR5cGU6ICdkYXRlJyxcblx0XHRcdGlubGluZTogZmFsc2UsXG5cdFx0XHRtb250aEZpcnN0OiBmYWxzZSxcblx0XHRcdHJlZ0V4cDogU2VtYW50aWNMb2NhbGl6YXRpb24ucmVnRXhwLFxuXHRcdH0pO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZC5jYWxlbmRhcih7XG5cdFx0XHRmaXJzdERheU9mV2VlazogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJGaXJzdERheU9mV2Vlayxcblx0XHRcdHRleHQ6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyVGV4dCxcblx0XHRcdHN0YXJ0Q2FsZW5kYXI6IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LFxuXHRcdFx0dHlwZTogJ2RhdGUnLFxuXHRcdFx0aW5saW5lOiBmYWxzZSxcblx0XHRcdG1vbnRoRmlyc3Q6IGZhbHNlLFxuXHRcdFx0cmVnRXhwOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5yZWdFeHAsXG5cdFx0XHRvbkNoYW5nZTogKG5ld0RhdGVUbykgPT4ge1xuXHRcdFx0XHRsZXQgb2xkRGF0ZVRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZGF0ZV90by5hdHRyKCd2YWx1ZScpO1xuXHRcdFx0XHRpZiAobmV3RGF0ZVRvICE9PSBudWxsICYmIG9sZERhdGVUbyAhPT0gJycpIHtcblx0XHRcdFx0XHRvbGREYXRlVG8gPSBuZXcgRGF0ZShvbGREYXRlVG8gKiAxMDAwKTtcblx0XHRcdFx0XHRpZiAoKG5ld0RhdGVUbyAtIG9sZERhdGVUbykgIT09IDApIHtcblx0XHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGRhdGVfZnJvbS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lU3RhcnQuY2FsZW5kYXIoe1xuXHRcdFx0Zmlyc3REYXlPZldlZWs6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyRmlyc3REYXlPZldlZWssXG5cdFx0XHR0ZXh0OiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhclRleHQsXG5cdFx0XHRlbmRDYWxlbmRhcjogb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lRW5kLFxuXHRcdFx0dHlwZTogJ3RpbWUnLFxuXHRcdFx0aW5saW5lOiBmYWxzZSxcblx0XHRcdGRpc2FibGVNaW51dGU6IHRydWUsXG5cdFx0XHRhbXBtOiBmYWxzZSxcblx0XHR9KTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVFbmQuY2FsZW5kYXIoe1xuXHRcdFx0Zmlyc3REYXlPZldlZWs6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyRmlyc3REYXlPZldlZWssXG5cdFx0XHR0ZXh0OiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhclRleHQsXG5cdFx0XHRzdGFydENhbGVuZGFyOiBvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVTdGFydCxcblx0XHRcdHR5cGU6ICd0aW1lJyxcblx0XHRcdGlubGluZTogZmFsc2UsXG5cdFx0XHRkaXNhYmxlTWludXRlOiB0cnVlLFxuXHRcdFx0YW1wbTogZmFsc2UsXG5cdFx0XHRvbkNoYW5nZTogKG5ld1RpbWVUbykgPT4ge1xuXHRcdFx0XHRsZXQgb2xkVGltZVRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kdGltZV90by5hdHRyKCd2YWx1ZScpO1xuXHRcdFx0XHRpZiAobmV3VGltZVRvICE9PSBudWxsICYmIG9sZFRpbWVUbyAhPT0gJycpIHtcblx0XHRcdFx0XHRvbGRUaW1lVG8gPSBuZXcgRGF0ZShvbGRUaW1lVG8gKiAxMDAwKTtcblx0XHRcdFx0XHRpZiAoKG5ld1RpbWVUbyAtIG9sZFRpbWVUbykgIT09IDApIHtcblx0XHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHRpbWVfdG8udHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdCQoJyNhY3Rpb24nKVxuXHRcdFx0LmRyb3Bkb3duKHtcblx0XHRcdFx0b25DaGFuZ2UoKSB7XG5cdFx0XHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC50b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKTtcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdCQoJyN3ZWVrZGF5X2Zyb20nKVxuXHRcdFx0LmRyb3Bkb3duKHtcblx0XHRcdFx0b25DaGFuZ2UoKSB7XG5cdFx0XHRcdFx0Y29uc3QgZnJvbSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ3dlZWtkYXlfZnJvbScpO1xuXHRcdFx0XHRcdGNvbnN0IHRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWUnLCAnd2Vla2RheV90bycpO1xuXHRcdFx0XHRcdGlmIChmcm9tIDwgdG8gfHwgdG8gPT09IC0xIHx8IGZyb20gPT09IC0xKSB7XG5cdFx0XHRcdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICd3ZWVrZGF5X3RvJywgZnJvbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0JCgnI3dlZWtkYXlfdG8nKVxuXHRcdFx0LmRyb3Bkb3duKHtcblx0XHRcdFx0b25DaGFuZ2UoKSB7XG5cdFx0XHRcdFx0Y29uc3QgZnJvbSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ3dlZWtkYXlfZnJvbScpO1xuXHRcdFx0XHRcdGNvbnN0IHRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWUnLCAnd2Vla2RheV90bycpO1xuXHRcdFx0XHRcdGlmICh0byA8IGZyb20gfHwgZnJvbSA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ3dlZWtkYXlfZnJvbScsIHRvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblxuXHRcdCQoJyNlcmFzZS1kYXRlcycpLm9uKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNTdGFydC5jYWxlbmRhcignY2xlYXInKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZC5jYWxlbmRhcignY2xlYXInKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmpcblx0XHRcdFx0LmZvcm0oJ3NldCB2YWx1ZXMnLCB7XG5cdFx0XHRcdFx0ZGF0ZV9mcm9tOiAnJyxcblx0XHRcdFx0XHRkYXRlX3RvOiAnJyxcblx0XHRcdFx0fSk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSk7XG5cblx0XHQkKCcjZXJhc2Utd2Vla2RheXMnKS5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9ialxuXHRcdFx0XHQuZm9ybSgnc2V0IHZhbHVlcycsIHtcblx0XHRcdFx0XHR3ZWVrZGF5X2Zyb206IC0xLFxuXHRcdFx0XHRcdHdlZWtkYXlfdG86IC0xLFxuXHRcdFx0XHR9KTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXHRcdCQoJyNlcmFzZS10aW1lcGVyaW9kJykub24oJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZVN0YXJ0LmNhbGVuZGFyKCdjbGVhcicpO1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lRW5kLmNhbGVuZGFyKCdjbGVhcicpO1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kdGltZV90by50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLmluaXRpYWxpemVGb3JtKCk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9yd2FyZGluZ1NlbGVjdERyb3Bkb3duLmRyb3Bkb3duKEV4dGVuc2lvbnMuZ2V0RHJvcGRvd25TZXR0aW5nc1dpdGhvdXRFbXB0eSgpKTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLnRvZ2dsZURpc2FibGVkRmllbGRDbGFzcygpO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuY2hhbmdlRGF0ZUZvcm1hdCgpO1xuXHR9LFxuXHQvKipcblx0ICog0JzQtdC90Y/QtdGCINC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1INC00LDRgtGLINC90LDRh9Cw0LvQsCDQuCDQtNCw0YLRiyDQvtC60L7QvdGH0LDQvdC40Y8g0LjQtyBsaW51eHRpbWUg0LIg0LvQvtC60LDQu9GM0L3QvtC1INC/0YDQtdC00YHRgtCw0LLQu9C10L3QuNC1XG5cdCAqL1xuXHRjaGFuZ2VEYXRlRm9ybWF0KCkge1xuXHRcdGNvbnN0IGRhdGVGcm9tID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZGF0ZV9mcm9tLmF0dHIoJ3ZhbHVlJyk7XG5cdFx0Y29uc3QgZGF0ZVRvID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZGF0ZV90by5hdHRyKCd2YWx1ZScpO1xuXHRcdGlmIChkYXRlRnJvbSAhPT0gdW5kZWZpbmVkICYmIGRhdGVGcm9tLmxlbmd0aCA+IDApIHtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LmNhbGVuZGFyKCdzZXQgZGF0ZScsIG5ldyBEYXRlKGRhdGVGcm9tICogMTAwMCkpO1xuXHRcdFx0Ly8gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWUnLCAnZGF0ZV9mcm9tJywgZGF0ZUZyb20pO1xuXHRcdH1cblx0XHRpZiAoZGF0ZVRvICE9PSB1bmRlZmluZWQgJiYgZGF0ZVRvLmxlbmd0aCA+IDApIHtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZC5jYWxlbmRhcignc2V0IGRhdGUnLCBuZXcgRGF0ZShkYXRlVG8gKiAxMDAwKSk7XG5cdFx0XHQvLyBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICdkYXRlX3RvJywgZGF0ZVRvKTtcblx0XHR9XG5cdH0sXG5cdHRvZ2dsZURpc2FibGVkRmllbGRDbGFzcygpIHtcblx0XHRpZiAob3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWUnLCAnYWN0aW9uJykgPT09ICdleHRlbnNpb24nKSB7XG5cdFx0XHQkKCcjZXh0ZW5zaW9uLWdyb3VwJykuc2hvdygpO1xuXHRcdFx0JCgnI2F1ZGlvLWZpbGUtZ3JvdXAnKS5oaWRlKCk7XG5cdFx0XHQkKCcjYXVkaW9fbWVzc2FnZV9pZCcpLmRyb3Bkb3duKCdjbGVhcicpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcjZXh0ZW5zaW9uLWdyb3VwJykuaGlkZSgpO1xuXHRcdFx0JCgnI2F1ZGlvLWZpbGUtZ3JvdXAnKS5zaG93KCk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICdleHRlbnNpb24nLCAtMSk7XG5cdFx0fVxuXHR9LFxuXHQvKipcblx0ICog0JrQsNGB0YLQvtC80L3QsNGPINC/0YDQvtCy0LXRgNC60LAg0L/QvtC70LXQuSDRhNC+0YDQvNGLLCDQutC+0YLQvtGA0YvQtSDQvdC1INC/0L7Qu9GD0YfQsNC10YLRgdGPINGB0LTQtdC70LDRgtGMINGH0LXRgNC10Lcg0LLQsNC70LjQtNCw0YbQuNGOXG5cdCAqIEBwYXJhbSByZXN1bHRcblx0ICogQHJldHVybnMgeyp9XG5cdCAqL1xuXHRjdXN0b21WYWxpZGF0ZUZvcm0ocmVzdWx0KSB7XG5cdFx0Ly8g0J/RgNC+0LLQtdGA0LjQvCDQv9C+0LvRjyDQtNCw0YLRi1xuXHRcdGlmICgocmVzdWx0LmRhdGEuZGF0ZV9mcm9tICE9PSAnJyAmJiByZXN1bHQuZGF0YS5kYXRlX3RvID09PSAnJylcblx0XHRcdHx8IChyZXN1bHQuZGF0YS5kYXRlX3RvICE9PSAnJyAmJiByZXN1bHQuZGF0YS5kYXRlX2Zyb20gPT09ICcnKSkge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrRGF0ZUludGVydmFsKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINC00L3QtdC5INC90LXQtNC10LvQuFxuXHRcdGlmICgocmVzdWx0LmRhdGEud2Vla2RheV9mcm9tID4gMCAmJiByZXN1bHQuZGF0YS53ZWVrZGF5X3RvID09PSAnLTEnKVxuXHRcdFx0fHwgKHJlc3VsdC5kYXRhLndlZWtkYXlfdG8gPiAwICYmIHJlc3VsdC5kYXRhLndlZWtkYXlfZnJvbSA9PT0gJy0xJykpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1dlZWtEYXlJbnRlcnZhbCkuc2hvdygpO1xuXHRcdFx0Rm9ybS4kc3VibWl0QnV0dG9uLnRyYW5zaXRpb24oJ3NoYWtlJykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Ly8g0J/RgNC+0LLQtdGA0LjQvCDQv9C+0LvRjyDQstGA0LXQvNC10L3QuFxuXHRcdGlmICgocmVzdWx0LmRhdGEudGltZV9mcm9tLmxlbmd0aCA+IDAgJiYgcmVzdWx0LmRhdGEudGltZV90by5sZW5ndGggPT09IDApXG5cdFx0XHR8fCAocmVzdWx0LmRhdGEudGltZV90by5sZW5ndGggPiAwICYmIHJlc3VsdC5kYXRhLnRpbWVfZnJvbS5sZW5ndGggPT09IDApKSB7XG5cdFx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tUaW1lSW50ZXJ2YWwpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Ly8g0J/RgNC+0LLQtdGA0LjQvCDQv9C+0LvRjyDQstGA0LXQvNC10L3QuCDQvdCwINGB0L7QsdC70Y7QtNC10L3QuNC1INGE0L7RgNC80LDRgtGDXG5cdFx0aWYgKChyZXN1bHQuZGF0YS50aW1lX2Zyb20ubGVuZ3RoID4gMCAmJiByZXN1bHQuZGF0YS50aW1lX3RvLmxlbmd0aCA9PT0gMClcblx0XHRcdHx8IChyZXN1bHQuZGF0YS50aW1lX3RvLmxlbmd0aCA+IDAgJiYgcmVzdWx0LmRhdGEudGltZV9mcm9tLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCkuc2hvdygpO1xuXHRcdFx0Rm9ybS4kc3VibWl0QnV0dG9uLnRyYW5zaXRpb24oJ3NoYWtlJykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vINCf0YDQvtCy0LXRgNC40Lwg0LLRgdC1INC/0L7Qu9GPXG5cdFx0aWYgKHJlc3VsdC5kYXRhLnRpbWVfZnJvbSA9PT0gJydcblx0XHRcdCYmIHJlc3VsdC5kYXRhLnRpbWVfdG8gPT09ICcnXG5cdFx0XHQmJiByZXN1bHQuZGF0YS53ZWVrZGF5X2Zyb20gPT09ICctMSdcblx0XHRcdCYmIHJlc3VsdC5kYXRhLndlZWtkYXlfdG8gPT09ICctMSdcblx0XHRcdCYmIHJlc3VsdC5kYXRhLmRhdGVfZnJvbSA9PT0gJydcblx0XHRcdCYmIHJlc3VsdC5kYXRhLmRhdGVfdG8gPT09ICcnKSB7XG5cdFx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlTm9SdWxlc1NlbGVjdGVkKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LFxuXHRjYkJlZm9yZVNlbmRGb3JtKHNldHRpbmdzKSB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gc2V0dGluZ3M7XG5cdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKCcnKS5oaWRlKCk7XG5cdFx0cmVzdWx0LmRhdGEgPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZXMnKTtcblx0XHRjb25zdCBkYXRlRnJvbSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LmNhbGVuZGFyKCdnZXQgZGF0ZScpO1xuXHRcdGlmIChkYXRlRnJvbSAhPT0gbnVsbCkge1xuXHRcdFx0ZGF0ZUZyb20uc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cdFx0XHRyZXN1bHQuZGF0YS5kYXRlX2Zyb20gPSBNYXRoLnJvdW5kKGRhdGVGcm9tLmdldFRpbWUoKSAvIDEwMDApO1xuXHRcdH1cblx0XHRjb25zdCBkYXRlVG8gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZURheXNFbmQuY2FsZW5kYXIoJ2dldCBkYXRlJyk7XG5cdFx0aWYgKGRhdGVUbyAhPT0gbnVsbCkge1xuXHRcdFx0ZGF0ZVRvLnNldEhvdXJzKDIzLCA1OSwgNTksIDApO1xuXHRcdFx0cmVzdWx0LmRhdGEuZGF0ZV90byA9IE1hdGgucm91bmQoZGF0ZVRvLmdldFRpbWUoKSAvIDEwMDApO1xuXHRcdH1cblx0XHRyZXR1cm4gb3V0T2ZXb3JrVGltZVJlY29yZC5jdXN0b21WYWxpZGF0ZUZvcm0ocmVzdWx0KTtcblx0fSxcblx0Y2JBZnRlclNlbmRGb3JtKCkge1xuXG5cdH0sXG5cdGluaXRpYWxpemVGb3JtKCkge1xuXHRcdEZvcm0uJGZvcm1PYmogPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqO1xuXHRcdEZvcm0udXJsID0gYCR7Z2xvYmFsUm9vdFVybH1vdXQtb2ZmLXdvcmstdGltZS9zYXZlYDtcblx0XHRGb3JtLnZhbGlkYXRlUnVsZXMgPSBvdXRPZldvcmtUaW1lUmVjb3JkLnZhbGlkYXRlUnVsZXM7XG5cdFx0Rm9ybS5jYkJlZm9yZVNlbmRGb3JtID0gb3V0T2ZXb3JrVGltZVJlY29yZC5jYkJlZm9yZVNlbmRGb3JtO1xuXHRcdEZvcm0uY2JBZnRlclNlbmRGb3JtID0gb3V0T2ZXb3JrVGltZVJlY29yZC5jYkFmdGVyU2VuZEZvcm07XG5cdFx0Rm9ybS5pbml0aWFsaXplKCk7XG5cdH0sXG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG5cdG91dE9mV29ya1RpbWVSZWNvcmQuaW5pdGlhbGl6ZSgpO1xufSk7XG4iXX0=