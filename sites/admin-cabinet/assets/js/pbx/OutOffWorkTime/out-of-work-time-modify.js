"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright (C) 2017-2020 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */

/* global globalRootUrl,globalTranslate, Extensions, Form, SemanticLocalization */
$.fn.form.settings.rules.customNotEmptyIfActionRule = function (value, action) {
  if (value.length === 0 && $('#action').val() === action) {
    return false;
  }

  return true;
};

var outOfWorkTimeRecord = {
  $formObj: $('#save-outoffwork-form'),
  $defaultDropdown: $('#save-outoffwork-form .dropdown-default'),
  $rangeDaysStart: $('#range-days-start'),
  $rangeDaysEnd: $('#range-days-end'),
  $rangeTimeStart: $('#range-time-start'),
  $rangeTimeEnd: $('#range-time-end'),
  $date_from: $('#date_from'),
  $date_to: $('#date_to'),
  $time_to: $('#time_to'),
  $forwardingSelectDropdown: $('#save-outoffwork-form .forwarding-select'),
  validateRules: {
    audio_message_id: {
      identifier: 'audio_message_id',
      rules: [{
        type: 'customNotEmptyIfActionRule[playmessage]',
        prompt: globalTranslate.tf_ValidateAudioMessageEmpty
      }]
    },
    extension: {
      identifier: 'extension',
      rules: [{
        type: 'customNotEmptyIfActionRule[extension]',
        prompt: globalTranslate.tf_ValidateExtensionEmpty
      }]
    },
    timefrom: {
      optional: true,
      identifier: 'time_from',
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    },
    timeto: {
      identifier: 'time_to',
      optional: true,
      rules: [{
        type: 'regExp',
        value: /^(2[0-3]|1?[0-9]):([0-5]?[0-9])$/,
        prompt: globalTranslate.tf_ValidateCheckTimeInterval
      }]
    }
  },
  initialize: function () {
    function initialize() {
      outOfWorkTimeRecord.$defaultDropdown.dropdown();
      outOfWorkTimeRecord.$rangeDaysStart.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        endCalendar: outOfWorkTimeRecord.$rangeDaysEnd,
        type: 'date',
        inline: false,
        monthFirst: false,
        regExp: SemanticLocalization.regExp
      });
      outOfWorkTimeRecord.$rangeDaysEnd.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        startCalendar: outOfWorkTimeRecord.$rangeDaysStart,
        type: 'date',
        inline: false,
        monthFirst: false,
        regExp: SemanticLocalization.regExp,
        onChange: function () {
          function onChange(newDateTo) {
            var oldDateTo = outOfWorkTimeRecord.$date_to.attr('value');

            if (newDateTo !== null && oldDateTo !== '') {
              oldDateTo = new Date(oldDateTo * 1000);

              if (newDateTo - oldDateTo !== 0) {
                outOfWorkTimeRecord.$date_from.trigger('change');
              }
            }
          }

          return onChange;
        }()
      });
      outOfWorkTimeRecord.$rangeTimeStart.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        endCalendar: outOfWorkTimeRecord.$rangeTimeEnd,
        type: 'time',
        inline: false,
        disableMinute: true,
        ampm: false
      });
      outOfWorkTimeRecord.$rangeTimeEnd.calendar({
        firstDayOfWeek: SemanticLocalization.calendarFirstDayOfWeek,
        text: SemanticLocalization.calendarText,
        startCalendar: outOfWorkTimeRecord.$rangeTimeStart,
        type: 'time',
        inline: false,
        disableMinute: true,
        ampm: false,
        onChange: function () {
          function onChange(newTimeTo) {
            var oldTimeTo = outOfWorkTimeRecord.$time_to.attr('value');

            if (newTimeTo !== null && oldTimeTo !== '') {
              oldTimeTo = new Date(oldTimeTo * 1000);

              if (newTimeTo - oldTimeTo !== 0) {
                outOfWorkTimeRecord.$time_to.trigger('change');
              }
            }
          }

          return onChange;
        }()
      });
      $('#action').dropdown({
        onChange: function () {
          function onChange() {
            outOfWorkTimeRecord.toggleDisabledFieldClass();
          }

          return onChange;
        }()
      });
      $('#weekday_from').dropdown({
        onChange: function () {
          function onChange() {
            var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
            var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

            if (from < to || to === -1 || from === -1) {
              outOfWorkTimeRecord.$formObj.form('set value', 'weekday_to', from);
            }
          }

          return onChange;
        }()
      });
      $('#weekday_to').dropdown({
        onChange: function () {
          function onChange() {
            var from = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_from');
            var to = outOfWorkTimeRecord.$formObj.form('get value', 'weekday_to');

            if (to < from || from === -1) {
              outOfWorkTimeRecord.$formObj.form('set value', 'weekday_from', to);
            }
          }

          return onChange;
        }()
      });
      $('#erase-dates').on('click', function (e) {
        outOfWorkTimeRecord.$rangeDaysStart.calendar('clear');
        outOfWorkTimeRecord.$rangeDaysEnd.calendar('clear');
        outOfWorkTimeRecord.$formObj.form('set values', {
          date_from: '',
          date_to: ''
        });
        e.preventDefault();
      });
      $('#erase-weekdays').on('click', function (e) {
        outOfWorkTimeRecord.$formObj.form('set values', {
          weekday_from: -1,
          weekday_to: -1
        });
        outOfWorkTimeRecord.$rangeDaysStart.trigger('change');
        e.preventDefault();
      });
      $('#erase-timeperiod').on('click', function (e) {
        outOfWorkTimeRecord.$rangeTimeStart.calendar('clear');
        outOfWorkTimeRecord.$rangeTimeEnd.calendar('clear');
        outOfWorkTimeRecord.$time_to.trigger('change');
        e.preventDefault();
      });
      outOfWorkTimeRecord.initializeForm();
      outOfWorkTimeRecord.$forwardingSelectDropdown.dropdown(Extensions.getDropdownSettingsWithoutEmpty());
      outOfWorkTimeRecord.toggleDisabledFieldClass();
      outOfWorkTimeRecord.changeDateFormat();
    }

    return initialize;
  }(),

  /**
   * Меняет представление даты начала и даты окончания из linuxtime в локальное представление
   */
  changeDateFormat: function () {
    function changeDateFormat() {
      var dateFrom = outOfWorkTimeRecord.$date_from.attr('value');
      var dateTo = outOfWorkTimeRecord.$date_to.attr('value');

      if (dateFrom !== undefined && dateFrom.length > 0) {
        outOfWorkTimeRecord.$rangeDaysStart.calendar('set date', new Date(dateFrom * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_from', dateFrom);
      }

      if (dateTo !== undefined && dateTo.length > 0) {
        outOfWorkTimeRecord.$rangeDaysEnd.calendar('set date', new Date(dateTo * 1000)); // outOfWorkTimeRecord.$formObj.form('set value', 'date_to', dateTo);
      }
    }

    return changeDateFormat;
  }(),
  toggleDisabledFieldClass: function () {
    function toggleDisabledFieldClass() {
      if (outOfWorkTimeRecord.$formObj.form('get value', 'action') === 'extension') {
        $('#extension-group').show();
        $('#audio-file-group').hide();
        $('#audio_message_id').dropdown('clear');
      } else {
        $('#extension-group').hide();
        $('#audio-file-group').show();
        outOfWorkTimeRecord.$formObj.form('set value', 'extension', -1);
      }
    }

    return toggleDisabledFieldClass;
  }(),

  /**
   * Кастомная проверка полей формы, которые не получается сделать через валидацию
   * @param result
   * @returns {*}
   */
  customValidateForm: function () {
    function customValidateForm(result) {
      // Проверим поля даты
      if (result.data.date_from !== '' && result.data.date_to === '' || result.data.date_to !== '' && result.data.date_from === '') {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckDateInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля дней недели


      if (result.data.weekday_from > 0 && result.data.weekday_to === '-1' || result.data.weekday_to > 0 && result.data.weekday_from === '-1') {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckWeekDayInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля времени


      if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим поля времени на соблюдение формату


      if (result.data.time_from.length > 0 && result.data.time_to.length === 0 || result.data.time_to.length > 0 && result.data.time_from.length === 0) {
        $('.form .error.message').html(globalTranslate.tf_ValidateCheckTimeInterval).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      } // Проверим все поля


      if (result.data.time_from === '' && result.data.time_to === '' && result.data.weekday_from === '-1' && result.data.weekday_to === '-1' && result.data.date_from === '' && result.data.date_to === '') {
        $('.form .error.message').html(globalTranslate.tf_ValidateNoRulesSelected).show();
        Form.$submitButton.transition('shake').removeClass('loading disabled');
        return false;
      }

      return result;
    }

    return customValidateForm;
  }(),
  cbBeforeSendForm: function () {
    function cbBeforeSendForm(settings) {
      var result = settings;
      $('.form .error.message').html('').hide();
      result.data = outOfWorkTimeRecord.$formObj.form('get values');
      var dateFrom = outOfWorkTimeRecord.$rangeDaysStart.calendar('get date');

      if (dateFrom !== null) {
        dateFrom.setHours(0, 0, 0, 0);
        result.data.date_from = Math.round(dateFrom.getTime() / 1000);
      }

      var dateTo = outOfWorkTimeRecord.$rangeDaysEnd.calendar('get date');

      if (dateTo !== null) {
        dateTo.setHours(23, 59, 59, 0);
        result.data.date_to = Math.round(dateTo.getTime() / 1000);
      }

      return outOfWorkTimeRecord.customValidateForm(result);
    }

    return cbBeforeSendForm;
  }(),
  cbAfterSendForm: function () {
    function cbAfterSendForm() {}

    return cbAfterSendForm;
  }(),
  initializeForm: function () {
    function initializeForm() {
      Form.$formObj = outOfWorkTimeRecord.$formObj;
      Form.url = "".concat(globalRootUrl, "out-off-work-time/save");
      Form.validateRules = outOfWorkTimeRecord.validateRules;
      Form.cbBeforeSendForm = outOfWorkTimeRecord.cbBeforeSendForm;
      Form.cbAfterSendForm = outOfWorkTimeRecord.cbAfterSendForm;
      Form.initialize();
    }

    return initializeForm;
  }()
};
$(document).ready(function () {
  outOfWorkTimeRecord.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9PdXRPZmZXb3JrVGltZS9vdXQtb2Ytd29yay10aW1lLW1vZGlmeS5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJmb3JtIiwic2V0dGluZ3MiLCJydWxlcyIsImN1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlIiwidmFsdWUiLCJhY3Rpb24iLCJsZW5ndGgiLCJ2YWwiLCJvdXRPZldvcmtUaW1lUmVjb3JkIiwiJGZvcm1PYmoiLCIkZGVmYXVsdERyb3Bkb3duIiwiJHJhbmdlRGF5c1N0YXJ0IiwiJHJhbmdlRGF5c0VuZCIsIiRyYW5nZVRpbWVTdGFydCIsIiRyYW5nZVRpbWVFbmQiLCIkZGF0ZV9mcm9tIiwiJGRhdGVfdG8iLCIkdGltZV90byIsIiRmb3J3YXJkaW5nU2VsZWN0RHJvcGRvd24iLCJ2YWxpZGF0ZVJ1bGVzIiwiYXVkaW9fbWVzc2FnZV9pZCIsImlkZW50aWZpZXIiLCJ0eXBlIiwicHJvbXB0IiwiZ2xvYmFsVHJhbnNsYXRlIiwidGZfVmFsaWRhdGVBdWRpb01lc3NhZ2VFbXB0eSIsImV4dGVuc2lvbiIsInRmX1ZhbGlkYXRlRXh0ZW5zaW9uRW1wdHkiLCJ0aW1lZnJvbSIsIm9wdGlvbmFsIiwidGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCIsInRpbWV0byIsImluaXRpYWxpemUiLCJkcm9wZG93biIsImNhbGVuZGFyIiwiZmlyc3REYXlPZldlZWsiLCJTZW1hbnRpY0xvY2FsaXphdGlvbiIsImNhbGVuZGFyRmlyc3REYXlPZldlZWsiLCJ0ZXh0IiwiY2FsZW5kYXJUZXh0IiwiZW5kQ2FsZW5kYXIiLCJpbmxpbmUiLCJtb250aEZpcnN0IiwicmVnRXhwIiwic3RhcnRDYWxlbmRhciIsIm9uQ2hhbmdlIiwibmV3RGF0ZVRvIiwib2xkRGF0ZVRvIiwiYXR0ciIsIkRhdGUiLCJ0cmlnZ2VyIiwiZGlzYWJsZU1pbnV0ZSIsImFtcG0iLCJuZXdUaW1lVG8iLCJvbGRUaW1lVG8iLCJ0b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MiLCJmcm9tIiwidG8iLCJvbiIsImUiLCJkYXRlX2Zyb20iLCJkYXRlX3RvIiwicHJldmVudERlZmF1bHQiLCJ3ZWVrZGF5X2Zyb20iLCJ3ZWVrZGF5X3RvIiwiaW5pdGlhbGl6ZUZvcm0iLCJFeHRlbnNpb25zIiwiZ2V0RHJvcGRvd25TZXR0aW5nc1dpdGhvdXRFbXB0eSIsImNoYW5nZURhdGVGb3JtYXQiLCJkYXRlRnJvbSIsImRhdGVUbyIsInVuZGVmaW5lZCIsInNob3ciLCJoaWRlIiwiY3VzdG9tVmFsaWRhdGVGb3JtIiwicmVzdWx0IiwiZGF0YSIsImh0bWwiLCJ0Zl9WYWxpZGF0ZUNoZWNrRGF0ZUludGVydmFsIiwiRm9ybSIsIiRzdWJtaXRCdXR0b24iLCJ0cmFuc2l0aW9uIiwicmVtb3ZlQ2xhc3MiLCJ0Zl9WYWxpZGF0ZUNoZWNrV2Vla0RheUludGVydmFsIiwidGltZV9mcm9tIiwidGltZV90byIsInRmX1ZhbGlkYXRlTm9SdWxlc1NlbGVjdGVkIiwiY2JCZWZvcmVTZW5kRm9ybSIsInNldEhvdXJzIiwiTWF0aCIsInJvdW5kIiwiZ2V0VGltZSIsImNiQWZ0ZXJTZW5kRm9ybSIsInVybCIsImdsb2JhbFJvb3RVcmwiLCJkb2N1bWVudCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFHQUEsQ0FBQyxDQUFDQyxFQUFGLENBQUtDLElBQUwsQ0FBVUMsUUFBVixDQUFtQkMsS0FBbkIsQ0FBeUJDLDBCQUF6QixHQUFzRCxVQUFDQyxLQUFELEVBQVFDLE1BQVIsRUFBbUI7QUFDeEUsTUFBSUQsS0FBSyxDQUFDRSxNQUFOLEtBQWlCLENBQWpCLElBQXNCUixDQUFDLENBQUMsU0FBRCxDQUFELENBQWFTLEdBQWIsT0FBdUJGLE1BQWpELEVBQXlEO0FBQ3hELFdBQU8sS0FBUDtBQUNBOztBQUNELFNBQU8sSUFBUDtBQUNBLENBTEQ7O0FBT0EsSUFBTUcsbUJBQW1CLEdBQUc7QUFDM0JDLEVBQUFBLFFBQVEsRUFBRVgsQ0FBQyxDQUFDLHVCQUFELENBRGdCO0FBRTNCWSxFQUFBQSxnQkFBZ0IsRUFBRVosQ0FBQyxDQUFDLHlDQUFELENBRlE7QUFHM0JhLEVBQUFBLGVBQWUsRUFBRWIsQ0FBQyxDQUFDLG1CQUFELENBSFM7QUFJM0JjLEVBQUFBLGFBQWEsRUFBRWQsQ0FBQyxDQUFDLGlCQUFELENBSlc7QUFLM0JlLEVBQUFBLGVBQWUsRUFBRWYsQ0FBQyxDQUFDLG1CQUFELENBTFM7QUFNM0JnQixFQUFBQSxhQUFhLEVBQUVoQixDQUFDLENBQUMsaUJBQUQsQ0FOVztBQU8zQmlCLEVBQUFBLFVBQVUsRUFBRWpCLENBQUMsQ0FBQyxZQUFELENBUGM7QUFRM0JrQixFQUFBQSxRQUFRLEVBQUVsQixDQUFDLENBQUMsVUFBRCxDQVJnQjtBQVMzQm1CLEVBQUFBLFFBQVEsRUFBRW5CLENBQUMsQ0FBQyxVQUFELENBVGdCO0FBVTNCb0IsRUFBQUEseUJBQXlCLEVBQUVwQixDQUFDLENBQUMsMENBQUQsQ0FWRDtBQVczQnFCLEVBQUFBLGFBQWEsRUFBRTtBQUNkQyxJQUFBQSxnQkFBZ0IsRUFBRTtBQUNqQkMsTUFBQUEsVUFBVSxFQUFFLGtCQURLO0FBRWpCbkIsTUFBQUEsS0FBSyxFQUFFLENBQ047QUFDQ29CLFFBQUFBLElBQUksRUFBRSx5Q0FEUDtBQUVDQyxRQUFBQSxNQUFNLEVBQUVDLGVBQWUsQ0FBQ0M7QUFGekIsT0FETTtBQUZVLEtBREo7QUFVZEMsSUFBQUEsU0FBUyxFQUFFO0FBQ1ZMLE1BQUFBLFVBQVUsRUFBRSxXQURGO0FBRVZuQixNQUFBQSxLQUFLLEVBQUUsQ0FDTjtBQUNDb0IsUUFBQUEsSUFBSSxFQUFFLHVDQURQO0FBRUNDLFFBQUFBLE1BQU0sRUFBRUMsZUFBZSxDQUFDRztBQUZ6QixPQURNO0FBRkcsS0FWRztBQW1CZEMsSUFBQUEsUUFBUSxFQUFFO0FBQ1RDLE1BQUFBLFFBQVEsRUFBRSxJQUREO0FBRVRSLE1BQUFBLFVBQVUsRUFBRSxXQUZIO0FBR1RuQixNQUFBQSxLQUFLLEVBQUUsQ0FBQztBQUNQb0IsUUFBQUEsSUFBSSxFQUFFLFFBREM7QUFFUGxCLFFBQUFBLEtBQUssRUFBRSxrQ0FGQTtBQUdQbUIsUUFBQUEsTUFBTSxFQUFFQyxlQUFlLENBQUNNO0FBSGpCLE9BQUQ7QUFIRSxLQW5CSTtBQTRCZEMsSUFBQUEsTUFBTSxFQUFFO0FBQ1BWLE1BQUFBLFVBQVUsRUFBRSxTQURMO0FBRVBRLE1BQUFBLFFBQVEsRUFBRSxJQUZIO0FBR1AzQixNQUFBQSxLQUFLLEVBQUUsQ0FBQztBQUNQb0IsUUFBQUEsSUFBSSxFQUFFLFFBREM7QUFFUGxCLFFBQUFBLEtBQUssRUFBRSxrQ0FGQTtBQUdQbUIsUUFBQUEsTUFBTSxFQUFFQyxlQUFlLENBQUNNO0FBSGpCLE9BQUQ7QUFIQTtBQTVCTSxHQVhZO0FBaUQzQkUsRUFBQUEsVUFqRDJCO0FBQUEsMEJBaURkO0FBQ1p4QixNQUFBQSxtQkFBbUIsQ0FBQ0UsZ0JBQXBCLENBQXFDdUIsUUFBckM7QUFDQXpCLE1BQUFBLG1CQUFtQixDQUFDRyxlQUFwQixDQUFvQ3VCLFFBQXBDLENBQTZDO0FBQzVDQyxRQUFBQSxjQUFjLEVBQUVDLG9CQUFvQixDQUFDQyxzQkFETztBQUU1Q0MsUUFBQUEsSUFBSSxFQUFFRixvQkFBb0IsQ0FBQ0csWUFGaUI7QUFHNUNDLFFBQUFBLFdBQVcsRUFBRWhDLG1CQUFtQixDQUFDSSxhQUhXO0FBSTVDVSxRQUFBQSxJQUFJLEVBQUUsTUFKc0M7QUFLNUNtQixRQUFBQSxNQUFNLEVBQUUsS0FMb0M7QUFNNUNDLFFBQUFBLFVBQVUsRUFBRSxLQU5nQztBQU81Q0MsUUFBQUEsTUFBTSxFQUFFUCxvQkFBb0IsQ0FBQ087QUFQZSxPQUE3QztBQVNBbkMsTUFBQUEsbUJBQW1CLENBQUNJLGFBQXBCLENBQWtDc0IsUUFBbEMsQ0FBMkM7QUFDMUNDLFFBQUFBLGNBQWMsRUFBRUMsb0JBQW9CLENBQUNDLHNCQURLO0FBRTFDQyxRQUFBQSxJQUFJLEVBQUVGLG9CQUFvQixDQUFDRyxZQUZlO0FBRzFDSyxRQUFBQSxhQUFhLEVBQUVwQyxtQkFBbUIsQ0FBQ0csZUFITztBQUkxQ1csUUFBQUEsSUFBSSxFQUFFLE1BSm9DO0FBSzFDbUIsUUFBQUEsTUFBTSxFQUFFLEtBTGtDO0FBTTFDQyxRQUFBQSxVQUFVLEVBQUUsS0FOOEI7QUFPMUNDLFFBQUFBLE1BQU0sRUFBRVAsb0JBQW9CLENBQUNPLE1BUGE7QUFRMUNFLFFBQUFBLFFBQVE7QUFBRSw0QkFBQ0MsU0FBRCxFQUFlO0FBQ3hCLGdCQUFJQyxTQUFTLEdBQUd2QyxtQkFBbUIsQ0FBQ1EsUUFBcEIsQ0FBNkJnQyxJQUE3QixDQUFrQyxPQUFsQyxDQUFoQjs7QUFDQSxnQkFBSUYsU0FBUyxLQUFLLElBQWQsSUFBc0JDLFNBQVMsS0FBSyxFQUF4QyxFQUE0QztBQUMzQ0EsY0FBQUEsU0FBUyxHQUFHLElBQUlFLElBQUosQ0FBU0YsU0FBUyxHQUFHLElBQXJCLENBQVo7O0FBQ0Esa0JBQUtELFNBQVMsR0FBR0MsU0FBYixLQUE0QixDQUFoQyxFQUFtQztBQUNsQ3ZDLGdCQUFBQSxtQkFBbUIsQ0FBQ08sVUFBcEIsQ0FBK0JtQyxPQUEvQixDQUF1QyxRQUF2QztBQUNBO0FBQ0Q7QUFDRDs7QUFSTztBQUFBO0FBUmtDLE9BQTNDO0FBa0JBMUMsTUFBQUEsbUJBQW1CLENBQUNLLGVBQXBCLENBQW9DcUIsUUFBcEMsQ0FBNkM7QUFDNUNDLFFBQUFBLGNBQWMsRUFBRUMsb0JBQW9CLENBQUNDLHNCQURPO0FBRTVDQyxRQUFBQSxJQUFJLEVBQUVGLG9CQUFvQixDQUFDRyxZQUZpQjtBQUc1Q0MsUUFBQUEsV0FBVyxFQUFFaEMsbUJBQW1CLENBQUNNLGFBSFc7QUFJNUNRLFFBQUFBLElBQUksRUFBRSxNQUpzQztBQUs1Q21CLFFBQUFBLE1BQU0sRUFBRSxLQUxvQztBQU01Q1UsUUFBQUEsYUFBYSxFQUFFLElBTjZCO0FBTzVDQyxRQUFBQSxJQUFJLEVBQUU7QUFQc0MsT0FBN0M7QUFTQTVDLE1BQUFBLG1CQUFtQixDQUFDTSxhQUFwQixDQUFrQ29CLFFBQWxDLENBQTJDO0FBQzFDQyxRQUFBQSxjQUFjLEVBQUVDLG9CQUFvQixDQUFDQyxzQkFESztBQUUxQ0MsUUFBQUEsSUFBSSxFQUFFRixvQkFBb0IsQ0FBQ0csWUFGZTtBQUcxQ0ssUUFBQUEsYUFBYSxFQUFFcEMsbUJBQW1CLENBQUNLLGVBSE87QUFJMUNTLFFBQUFBLElBQUksRUFBRSxNQUpvQztBQUsxQ21CLFFBQUFBLE1BQU0sRUFBRSxLQUxrQztBQU0xQ1UsUUFBQUEsYUFBYSxFQUFFLElBTjJCO0FBTzFDQyxRQUFBQSxJQUFJLEVBQUUsS0FQb0M7QUFRMUNQLFFBQUFBLFFBQVE7QUFBRSw0QkFBQ1EsU0FBRCxFQUFlO0FBQ3hCLGdCQUFJQyxTQUFTLEdBQUc5QyxtQkFBbUIsQ0FBQ1MsUUFBcEIsQ0FBNkIrQixJQUE3QixDQUFrQyxPQUFsQyxDQUFoQjs7QUFDQSxnQkFBSUssU0FBUyxLQUFLLElBQWQsSUFBc0JDLFNBQVMsS0FBSyxFQUF4QyxFQUE0QztBQUMzQ0EsY0FBQUEsU0FBUyxHQUFHLElBQUlMLElBQUosQ0FBU0ssU0FBUyxHQUFHLElBQXJCLENBQVo7O0FBQ0Esa0JBQUtELFNBQVMsR0FBR0MsU0FBYixLQUE0QixDQUFoQyxFQUFtQztBQUNsQzlDLGdCQUFBQSxtQkFBbUIsQ0FBQ1MsUUFBcEIsQ0FBNkJpQyxPQUE3QixDQUFxQyxRQUFyQztBQUNBO0FBQ0Q7QUFDRDs7QUFSTztBQUFBO0FBUmtDLE9BQTNDO0FBa0JBcEQsTUFBQUEsQ0FBQyxDQUFDLFNBQUQsQ0FBRCxDQUNFbUMsUUFERixDQUNXO0FBQ1RZLFFBQUFBLFFBRFM7QUFBQSw4QkFDRTtBQUNWckMsWUFBQUEsbUJBQW1CLENBQUMrQyx3QkFBcEI7QUFDQTs7QUFIUTtBQUFBO0FBQUEsT0FEWDtBQU1BekQsTUFBQUEsQ0FBQyxDQUFDLGVBQUQsQ0FBRCxDQUNFbUMsUUFERixDQUNXO0FBQ1RZLFFBQUFBLFFBRFM7QUFBQSw4QkFDRTtBQUNWLGdCQUFNVyxJQUFJLEdBQUdoRCxtQkFBbUIsQ0FBQ0MsUUFBcEIsQ0FBNkJULElBQTdCLENBQWtDLFdBQWxDLEVBQStDLGNBQS9DLENBQWI7QUFDQSxnQkFBTXlELEVBQUUsR0FBR2pELG1CQUFtQixDQUFDQyxRQUFwQixDQUE2QlQsSUFBN0IsQ0FBa0MsV0FBbEMsRUFBK0MsWUFBL0MsQ0FBWDs7QUFDQSxnQkFBSXdELElBQUksR0FBR0MsRUFBUCxJQUFhQSxFQUFFLEtBQUssQ0FBQyxDQUFyQixJQUEwQkQsSUFBSSxLQUFLLENBQUMsQ0FBeEMsRUFBMkM7QUFDMUNoRCxjQUFBQSxtQkFBbUIsQ0FBQ0MsUUFBcEIsQ0FBNkJULElBQTdCLENBQWtDLFdBQWxDLEVBQStDLFlBQS9DLEVBQTZEd0QsSUFBN0Q7QUFDQTtBQUNEOztBQVBRO0FBQUE7QUFBQSxPQURYO0FBVUExRCxNQUFBQSxDQUFDLENBQUMsYUFBRCxDQUFELENBQ0VtQyxRQURGLENBQ1c7QUFDVFksUUFBQUEsUUFEUztBQUFBLDhCQUNFO0FBQ1YsZ0JBQU1XLElBQUksR0FBR2hELG1CQUFtQixDQUFDQyxRQUFwQixDQUE2QlQsSUFBN0IsQ0FBa0MsV0FBbEMsRUFBK0MsY0FBL0MsQ0FBYjtBQUNBLGdCQUFNeUQsRUFBRSxHQUFHakQsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxXQUFsQyxFQUErQyxZQUEvQyxDQUFYOztBQUNBLGdCQUFJeUQsRUFBRSxHQUFHRCxJQUFMLElBQWFBLElBQUksS0FBSyxDQUFDLENBQTNCLEVBQThCO0FBQzdCaEQsY0FBQUEsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxXQUFsQyxFQUErQyxjQUEvQyxFQUErRHlELEVBQS9EO0FBQ0E7QUFDRDs7QUFQUTtBQUFBO0FBQUEsT0FEWDtBQVdBM0QsTUFBQUEsQ0FBQyxDQUFDLGNBQUQsQ0FBRCxDQUFrQjRELEVBQWxCLENBQXFCLE9BQXJCLEVBQThCLFVBQUNDLENBQUQsRUFBTztBQUNwQ25ELFFBQUFBLG1CQUFtQixDQUFDRyxlQUFwQixDQUFvQ3VCLFFBQXBDLENBQTZDLE9BQTdDO0FBQ0ExQixRQUFBQSxtQkFBbUIsQ0FBQ0ksYUFBcEIsQ0FBa0NzQixRQUFsQyxDQUEyQyxPQUEzQztBQUNBMUIsUUFBQUEsbUJBQW1CLENBQUNDLFFBQXBCLENBQ0VULElBREYsQ0FDTyxZQURQLEVBQ3FCO0FBQ25CNEQsVUFBQUEsU0FBUyxFQUFFLEVBRFE7QUFFbkJDLFVBQUFBLE9BQU8sRUFBRTtBQUZVLFNBRHJCO0FBS0FGLFFBQUFBLENBQUMsQ0FBQ0csY0FBRjtBQUNBLE9BVEQ7QUFXQWhFLE1BQUFBLENBQUMsQ0FBQyxpQkFBRCxDQUFELENBQXFCNEQsRUFBckIsQ0FBd0IsT0FBeEIsRUFBaUMsVUFBQ0MsQ0FBRCxFQUFPO0FBQ3ZDbkQsUUFBQUEsbUJBQW1CLENBQUNDLFFBQXBCLENBQ0VULElBREYsQ0FDTyxZQURQLEVBQ3FCO0FBQ25CK0QsVUFBQUEsWUFBWSxFQUFFLENBQUMsQ0FESTtBQUVuQkMsVUFBQUEsVUFBVSxFQUFFLENBQUM7QUFGTSxTQURyQjtBQUtBeEQsUUFBQUEsbUJBQW1CLENBQUNHLGVBQXBCLENBQW9DdUMsT0FBcEMsQ0FBNEMsUUFBNUM7QUFDQVMsUUFBQUEsQ0FBQyxDQUFDRyxjQUFGO0FBQ0EsT0FSRDtBQVNBaEUsTUFBQUEsQ0FBQyxDQUFDLG1CQUFELENBQUQsQ0FBdUI0RCxFQUF2QixDQUEwQixPQUExQixFQUFtQyxVQUFDQyxDQUFELEVBQU87QUFDekNuRCxRQUFBQSxtQkFBbUIsQ0FBQ0ssZUFBcEIsQ0FBb0NxQixRQUFwQyxDQUE2QyxPQUE3QztBQUNBMUIsUUFBQUEsbUJBQW1CLENBQUNNLGFBQXBCLENBQWtDb0IsUUFBbEMsQ0FBMkMsT0FBM0M7QUFDQTFCLFFBQUFBLG1CQUFtQixDQUFDUyxRQUFwQixDQUE2QmlDLE9BQTdCLENBQXFDLFFBQXJDO0FBQ0FTLFFBQUFBLENBQUMsQ0FBQ0csY0FBRjtBQUNBLE9BTEQ7QUFNQXRELE1BQUFBLG1CQUFtQixDQUFDeUQsY0FBcEI7QUFDQXpELE1BQUFBLG1CQUFtQixDQUFDVSx5QkFBcEIsQ0FBOENlLFFBQTlDLENBQXVEaUMsVUFBVSxDQUFDQywrQkFBWCxFQUF2RDtBQUNBM0QsTUFBQUEsbUJBQW1CLENBQUMrQyx3QkFBcEI7QUFDQS9DLE1BQUFBLG1CQUFtQixDQUFDNEQsZ0JBQXBCO0FBQ0E7O0FBbEswQjtBQUFBOztBQW1LM0I7OztBQUdBQSxFQUFBQSxnQkF0SzJCO0FBQUEsZ0NBc0tSO0FBQ2xCLFVBQU1DLFFBQVEsR0FBRzdELG1CQUFtQixDQUFDTyxVQUFwQixDQUErQmlDLElBQS9CLENBQW9DLE9BQXBDLENBQWpCO0FBQ0EsVUFBTXNCLE1BQU0sR0FBRzlELG1CQUFtQixDQUFDUSxRQUFwQixDQUE2QmdDLElBQTdCLENBQWtDLE9BQWxDLENBQWY7O0FBQ0EsVUFBSXFCLFFBQVEsS0FBS0UsU0FBYixJQUEwQkYsUUFBUSxDQUFDL0QsTUFBVCxHQUFrQixDQUFoRCxFQUFtRDtBQUNsREUsUUFBQUEsbUJBQW1CLENBQUNHLGVBQXBCLENBQW9DdUIsUUFBcEMsQ0FBNkMsVUFBN0MsRUFBeUQsSUFBSWUsSUFBSixDQUFTb0IsUUFBUSxHQUFHLElBQXBCLENBQXpELEVBRGtELENBRWxEO0FBQ0E7O0FBQ0QsVUFBSUMsTUFBTSxLQUFLQyxTQUFYLElBQXdCRCxNQUFNLENBQUNoRSxNQUFQLEdBQWdCLENBQTVDLEVBQStDO0FBQzlDRSxRQUFBQSxtQkFBbUIsQ0FBQ0ksYUFBcEIsQ0FBa0NzQixRQUFsQyxDQUEyQyxVQUEzQyxFQUF1RCxJQUFJZSxJQUFKLENBQVNxQixNQUFNLEdBQUcsSUFBbEIsQ0FBdkQsRUFEOEMsQ0FFOUM7QUFDQTtBQUNEOztBQWpMMEI7QUFBQTtBQWtMM0JmLEVBQUFBLHdCQWxMMkI7QUFBQSx3Q0FrTEE7QUFDMUIsVUFBSS9DLG1CQUFtQixDQUFDQyxRQUFwQixDQUE2QlQsSUFBN0IsQ0FBa0MsV0FBbEMsRUFBK0MsUUFBL0MsTUFBNkQsV0FBakUsRUFBOEU7QUFDN0VGLFFBQUFBLENBQUMsQ0FBQyxrQkFBRCxDQUFELENBQXNCMEUsSUFBdEI7QUFDQTFFLFFBQUFBLENBQUMsQ0FBQyxtQkFBRCxDQUFELENBQXVCMkUsSUFBdkI7QUFDQTNFLFFBQUFBLENBQUMsQ0FBQyxtQkFBRCxDQUFELENBQXVCbUMsUUFBdkIsQ0FBZ0MsT0FBaEM7QUFDQSxPQUpELE1BSU87QUFDTm5DLFFBQUFBLENBQUMsQ0FBQyxrQkFBRCxDQUFELENBQXNCMkUsSUFBdEI7QUFDQTNFLFFBQUFBLENBQUMsQ0FBQyxtQkFBRCxDQUFELENBQXVCMEUsSUFBdkI7QUFDQWhFLFFBQUFBLG1CQUFtQixDQUFDQyxRQUFwQixDQUE2QlQsSUFBN0IsQ0FBa0MsV0FBbEMsRUFBK0MsV0FBL0MsRUFBNEQsQ0FBQyxDQUE3RDtBQUNBO0FBQ0Q7O0FBNUwwQjtBQUFBOztBQTZMM0I7Ozs7O0FBS0EwRSxFQUFBQSxrQkFsTTJCO0FBQUEsZ0NBa01SQyxNQWxNUSxFQWtNQTtBQUMxQjtBQUNBLFVBQUtBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZaEIsU0FBWixLQUEwQixFQUExQixJQUFnQ2UsTUFBTSxDQUFDQyxJQUFQLENBQVlmLE9BQVosS0FBd0IsRUFBekQsSUFDQ2MsTUFBTSxDQUFDQyxJQUFQLENBQVlmLE9BQVosS0FBd0IsRUFBeEIsSUFBOEJjLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZaEIsU0FBWixLQUEwQixFQUQ3RCxFQUNrRTtBQUNqRTlELFFBQUFBLENBQUMsQ0FBQyxzQkFBRCxDQUFELENBQTBCK0UsSUFBMUIsQ0FBK0JyRCxlQUFlLENBQUNzRCw0QkFBL0MsRUFBNkVOLElBQTdFO0FBQ0FPLFFBQUFBLElBQUksQ0FBQ0MsYUFBTCxDQUFtQkMsVUFBbkIsQ0FBOEIsT0FBOUIsRUFBdUNDLFdBQXZDLENBQW1ELGtCQUFuRDtBQUNBLGVBQU8sS0FBUDtBQUNBLE9BUHlCLENBUTFCOzs7QUFDQSxVQUFLUCxNQUFNLENBQUNDLElBQVAsQ0FBWWIsWUFBWixHQUEyQixDQUEzQixJQUFnQ1ksTUFBTSxDQUFDQyxJQUFQLENBQVlaLFVBQVosS0FBMkIsSUFBNUQsSUFDQ1csTUFBTSxDQUFDQyxJQUFQLENBQVlaLFVBQVosR0FBeUIsQ0FBekIsSUFBOEJXLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZYixZQUFaLEtBQTZCLElBRGhFLEVBQ3VFO0FBQ3RFakUsUUFBQUEsQ0FBQyxDQUFDLHNCQUFELENBQUQsQ0FBMEIrRSxJQUExQixDQUErQnJELGVBQWUsQ0FBQzJELCtCQUEvQyxFQUFnRlgsSUFBaEY7QUFDQU8sUUFBQUEsSUFBSSxDQUFDQyxhQUFMLENBQW1CQyxVQUFuQixDQUE4QixPQUE5QixFQUF1Q0MsV0FBdkMsQ0FBbUQsa0JBQW5EO0FBQ0EsZUFBTyxLQUFQO0FBQ0EsT0FkeUIsQ0FlMUI7OztBQUNBLFVBQUtQLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZUSxTQUFaLENBQXNCOUUsTUFBdEIsR0FBK0IsQ0FBL0IsSUFBb0NxRSxNQUFNLENBQUNDLElBQVAsQ0FBWVMsT0FBWixDQUFvQi9FLE1BQXBCLEtBQStCLENBQXBFLElBQ0NxRSxNQUFNLENBQUNDLElBQVAsQ0FBWVMsT0FBWixDQUFvQi9FLE1BQXBCLEdBQTZCLENBQTdCLElBQWtDcUUsTUFBTSxDQUFDQyxJQUFQLENBQVlRLFNBQVosQ0FBc0I5RSxNQUF0QixLQUFpQyxDQUR4RSxFQUM0RTtBQUMzRVIsUUFBQUEsQ0FBQyxDQUFDLHNCQUFELENBQUQsQ0FBMEIrRSxJQUExQixDQUErQnJELGVBQWUsQ0FBQ00sNEJBQS9DLEVBQTZFMEMsSUFBN0U7QUFDQU8sUUFBQUEsSUFBSSxDQUFDQyxhQUFMLENBQW1CQyxVQUFuQixDQUE4QixPQUE5QixFQUF1Q0MsV0FBdkMsQ0FBbUQsa0JBQW5EO0FBRUEsZUFBTyxLQUFQO0FBQ0EsT0F0QnlCLENBdUIxQjs7O0FBQ0EsVUFBS1AsTUFBTSxDQUFDQyxJQUFQLENBQVlRLFNBQVosQ0FBc0I5RSxNQUF0QixHQUErQixDQUEvQixJQUFvQ3FFLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZUyxPQUFaLENBQW9CL0UsTUFBcEIsS0FBK0IsQ0FBcEUsSUFDQ3FFLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZUyxPQUFaLENBQW9CL0UsTUFBcEIsR0FBNkIsQ0FBN0IsSUFBa0NxRSxNQUFNLENBQUNDLElBQVAsQ0FBWVEsU0FBWixDQUFzQjlFLE1BQXRCLEtBQWlDLENBRHhFLEVBQzRFO0FBQzNFUixRQUFBQSxDQUFDLENBQUMsc0JBQUQsQ0FBRCxDQUEwQitFLElBQTFCLENBQStCckQsZUFBZSxDQUFDTSw0QkFBL0MsRUFBNkUwQyxJQUE3RTtBQUNBTyxRQUFBQSxJQUFJLENBQUNDLGFBQUwsQ0FBbUJDLFVBQW5CLENBQThCLE9BQTlCLEVBQXVDQyxXQUF2QyxDQUFtRCxrQkFBbkQ7QUFFQSxlQUFPLEtBQVA7QUFDQSxPQTlCeUIsQ0FnQzFCOzs7QUFDQSxVQUFJUCxNQUFNLENBQUNDLElBQVAsQ0FBWVEsU0FBWixLQUEwQixFQUExQixJQUNBVCxNQUFNLENBQUNDLElBQVAsQ0FBWVMsT0FBWixLQUF3QixFQUR4QixJQUVBVixNQUFNLENBQUNDLElBQVAsQ0FBWWIsWUFBWixLQUE2QixJQUY3QixJQUdBWSxNQUFNLENBQUNDLElBQVAsQ0FBWVosVUFBWixLQUEyQixJQUgzQixJQUlBVyxNQUFNLENBQUNDLElBQVAsQ0FBWWhCLFNBQVosS0FBMEIsRUFKMUIsSUFLQWUsTUFBTSxDQUFDQyxJQUFQLENBQVlmLE9BQVosS0FBd0IsRUFMNUIsRUFLZ0M7QUFDL0IvRCxRQUFBQSxDQUFDLENBQUMsc0JBQUQsQ0FBRCxDQUEwQitFLElBQTFCLENBQStCckQsZUFBZSxDQUFDOEQsMEJBQS9DLEVBQTJFZCxJQUEzRTtBQUNBTyxRQUFBQSxJQUFJLENBQUNDLGFBQUwsQ0FBbUJDLFVBQW5CLENBQThCLE9BQTlCLEVBQXVDQyxXQUF2QyxDQUFtRCxrQkFBbkQ7QUFDQSxlQUFPLEtBQVA7QUFDQTs7QUFDRCxhQUFPUCxNQUFQO0FBQ0E7O0FBOU8wQjtBQUFBO0FBK08zQlksRUFBQUEsZ0JBL08yQjtBQUFBLDhCQStPVnRGLFFBL09VLEVBK09BO0FBQzFCLFVBQU0wRSxNQUFNLEdBQUcxRSxRQUFmO0FBQ0FILE1BQUFBLENBQUMsQ0FBQyxzQkFBRCxDQUFELENBQTBCK0UsSUFBMUIsQ0FBK0IsRUFBL0IsRUFBbUNKLElBQW5DO0FBQ0FFLE1BQUFBLE1BQU0sQ0FBQ0MsSUFBUCxHQUFjcEUsbUJBQW1CLENBQUNDLFFBQXBCLENBQTZCVCxJQUE3QixDQUFrQyxZQUFsQyxDQUFkO0FBQ0EsVUFBTXFFLFFBQVEsR0FBRzdELG1CQUFtQixDQUFDRyxlQUFwQixDQUFvQ3VCLFFBQXBDLENBQTZDLFVBQTdDLENBQWpCOztBQUNBLFVBQUltQyxRQUFRLEtBQUssSUFBakIsRUFBdUI7QUFDdEJBLFFBQUFBLFFBQVEsQ0FBQ21CLFFBQVQsQ0FBa0IsQ0FBbEIsRUFBcUIsQ0FBckIsRUFBd0IsQ0FBeEIsRUFBMkIsQ0FBM0I7QUFDQWIsUUFBQUEsTUFBTSxDQUFDQyxJQUFQLENBQVloQixTQUFaLEdBQXdCNkIsSUFBSSxDQUFDQyxLQUFMLENBQVdyQixRQUFRLENBQUNzQixPQUFULEtBQXFCLElBQWhDLENBQXhCO0FBQ0E7O0FBQ0QsVUFBTXJCLE1BQU0sR0FBRzlELG1CQUFtQixDQUFDSSxhQUFwQixDQUFrQ3NCLFFBQWxDLENBQTJDLFVBQTNDLENBQWY7O0FBQ0EsVUFBSW9DLE1BQU0sS0FBSyxJQUFmLEVBQXFCO0FBQ3BCQSxRQUFBQSxNQUFNLENBQUNrQixRQUFQLENBQWdCLEVBQWhCLEVBQW9CLEVBQXBCLEVBQXdCLEVBQXhCLEVBQTRCLENBQTVCO0FBQ0FiLFFBQUFBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZZixPQUFaLEdBQXNCNEIsSUFBSSxDQUFDQyxLQUFMLENBQVdwQixNQUFNLENBQUNxQixPQUFQLEtBQW1CLElBQTlCLENBQXRCO0FBQ0E7O0FBQ0QsYUFBT25GLG1CQUFtQixDQUFDa0Usa0JBQXBCLENBQXVDQyxNQUF2QyxDQUFQO0FBQ0E7O0FBOVAwQjtBQUFBO0FBK1AzQmlCLEVBQUFBLGVBL1AyQjtBQUFBLCtCQStQVCxDQUVqQjs7QUFqUTBCO0FBQUE7QUFrUTNCM0IsRUFBQUEsY0FsUTJCO0FBQUEsOEJBa1FWO0FBQ2hCYyxNQUFBQSxJQUFJLENBQUN0RSxRQUFMLEdBQWdCRCxtQkFBbUIsQ0FBQ0MsUUFBcEM7QUFDQXNFLE1BQUFBLElBQUksQ0FBQ2MsR0FBTCxhQUFjQyxhQUFkO0FBQ0FmLE1BQUFBLElBQUksQ0FBQzVELGFBQUwsR0FBcUJYLG1CQUFtQixDQUFDVyxhQUF6QztBQUNBNEQsTUFBQUEsSUFBSSxDQUFDUSxnQkFBTCxHQUF3Qi9FLG1CQUFtQixDQUFDK0UsZ0JBQTVDO0FBQ0FSLE1BQUFBLElBQUksQ0FBQ2EsZUFBTCxHQUF1QnBGLG1CQUFtQixDQUFDb0YsZUFBM0M7QUFDQWIsTUFBQUEsSUFBSSxDQUFDL0MsVUFBTDtBQUNBOztBQXpRMEI7QUFBQTtBQUFBLENBQTVCO0FBNFFBbEMsQ0FBQyxDQUFDaUcsUUFBRCxDQUFELENBQVlDLEtBQVosQ0FBa0IsWUFBTTtBQUN2QnhGLEVBQUFBLG1CQUFtQixDQUFDd0IsVUFBcEI7QUFDQSxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIE1pa29QQlggLSBmcmVlIHBob25lIHN5c3RlbSBmb3Igc21hbGwgYnVzaW5lc3NcbiAqIENvcHlyaWdodCAoQykgMjAxNy0yMDIwIEFsZXhleSBQb3J0bm92IGFuZCBOaWtvbGF5IEJla2V0b3ZcbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uXG4gKiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cbi8qIGdsb2JhbCBnbG9iYWxSb290VXJsLGdsb2JhbFRyYW5zbGF0ZSwgRXh0ZW5zaW9ucywgRm9ybSwgU2VtYW50aWNMb2NhbGl6YXRpb24gKi9cblxuXG4kLmZuLmZvcm0uc2V0dGluZ3MucnVsZXMuY3VzdG9tTm90RW1wdHlJZkFjdGlvblJ1bGUgPSAodmFsdWUsIGFjdGlvbikgPT4ge1xuXHRpZiAodmFsdWUubGVuZ3RoID09PSAwICYmICQoJyNhY3Rpb24nKS52YWwoKSA9PT0gYWN0aW9uKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHJldHVybiB0cnVlO1xufTtcblxuY29uc3Qgb3V0T2ZXb3JrVGltZVJlY29yZCA9IHtcblx0JGZvcm1PYmo6ICQoJyNzYXZlLW91dG9mZndvcmstZm9ybScpLFxuXHQkZGVmYXVsdERyb3Bkb3duOiAkKCcjc2F2ZS1vdXRvZmZ3b3JrLWZvcm0gLmRyb3Bkb3duLWRlZmF1bHQnKSxcblx0JHJhbmdlRGF5c1N0YXJ0OiAkKCcjcmFuZ2UtZGF5cy1zdGFydCcpLFxuXHQkcmFuZ2VEYXlzRW5kOiAkKCcjcmFuZ2UtZGF5cy1lbmQnKSxcblx0JHJhbmdlVGltZVN0YXJ0OiAkKCcjcmFuZ2UtdGltZS1zdGFydCcpLFxuXHQkcmFuZ2VUaW1lRW5kOiAkKCcjcmFuZ2UtdGltZS1lbmQnKSxcblx0JGRhdGVfZnJvbTogJCgnI2RhdGVfZnJvbScpLFxuXHQkZGF0ZV90bzogJCgnI2RhdGVfdG8nKSxcblx0JHRpbWVfdG86ICQoJyN0aW1lX3RvJyksXG5cdCRmb3J3YXJkaW5nU2VsZWN0RHJvcGRvd246ICQoJyNzYXZlLW91dG9mZndvcmstZm9ybSAuZm9yd2FyZGluZy1zZWxlY3QnKSxcblx0dmFsaWRhdGVSdWxlczoge1xuXHRcdGF1ZGlvX21lc3NhZ2VfaWQ6IHtcblx0XHRcdGlkZW50aWZpZXI6ICdhdWRpb19tZXNzYWdlX2lkJyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnY3VzdG9tTm90RW1wdHlJZkFjdGlvblJ1bGVbcGxheW1lc3NhZ2VdJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUF1ZGlvTWVzc2FnZUVtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdGV4dGVuc2lvbjoge1xuXHRcdFx0aWRlbnRpZmllcjogJ2V4dGVuc2lvbicsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2N1c3RvbU5vdEVtcHR5SWZBY3Rpb25SdWxlW2V4dGVuc2lvbl0nLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlRXh0ZW5zaW9uRW1wdHksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0dGltZWZyb206IHtcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0aWRlbnRpZmllcjogJ3RpbWVfZnJvbScsXG5cdFx0XHRydWxlczogW3tcblx0XHRcdFx0dHlwZTogJ3JlZ0V4cCcsXG5cdFx0XHRcdHZhbHVlOiAvXigyWzAtM118MT9bMC05XSk6KFswLTVdP1swLTldKSQvLFxuXHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrVGltZUludGVydmFsLFxuXHRcdFx0fV0sXG5cdFx0fSxcblx0XHR0aW1ldG86IHtcblx0XHRcdGlkZW50aWZpZXI6ICd0aW1lX3RvJyxcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0cnVsZXM6IFt7XG5cdFx0XHRcdHR5cGU6ICdyZWdFeHAnLFxuXHRcdFx0XHR2YWx1ZTogL14oMlswLTNdfDE/WzAtOV0pOihbMC01XT9bMC05XSkkLyxcblx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCxcblx0XHRcdH1dLFxuXHRcdH0sXG5cdH0sXG5cdGluaXRpYWxpemUoKSB7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZGVmYXVsdERyb3Bkb3duLmRyb3Bkb3duKCk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoe1xuXHRcdFx0Zmlyc3REYXlPZldlZWs6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyRmlyc3REYXlPZldlZWssXG5cdFx0XHR0ZXh0OiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhclRleHQsXG5cdFx0XHRlbmRDYWxlbmRhcjogb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLFxuXHRcdFx0dHlwZTogJ2RhdGUnLFxuXHRcdFx0aW5saW5lOiBmYWxzZSxcblx0XHRcdG1vbnRoRmlyc3Q6IGZhbHNlLFxuXHRcdFx0cmVnRXhwOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5yZWdFeHAsXG5cdFx0fSk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLmNhbGVuZGFyKHtcblx0XHRcdGZpcnN0RGF5T2ZXZWVrOiBTZW1hbnRpY0xvY2FsaXphdGlvbi5jYWxlbmRhckZpcnN0RGF5T2ZXZWVrLFxuXHRcdFx0dGV4dDogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJUZXh0LFxuXHRcdFx0c3RhcnRDYWxlbmRhcjogb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQsXG5cdFx0XHR0eXBlOiAnZGF0ZScsXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxuXHRcdFx0bW9udGhGaXJzdDogZmFsc2UsXG5cdFx0XHRyZWdFeHA6IFNlbWFudGljTG9jYWxpemF0aW9uLnJlZ0V4cCxcblx0XHRcdG9uQ2hhbmdlOiAobmV3RGF0ZVRvKSA9PiB7XG5cdFx0XHRcdGxldCBvbGREYXRlVG8gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRkYXRlX3RvLmF0dHIoJ3ZhbHVlJyk7XG5cdFx0XHRcdGlmIChuZXdEYXRlVG8gIT09IG51bGwgJiYgb2xkRGF0ZVRvICE9PSAnJykge1xuXHRcdFx0XHRcdG9sZERhdGVUbyA9IG5ldyBEYXRlKG9sZERhdGVUbyAqIDEwMDApO1xuXHRcdFx0XHRcdGlmICgobmV3RGF0ZVRvIC0gb2xkRGF0ZVRvKSAhPT0gMCkge1xuXHRcdFx0XHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZGF0ZV9mcm9tLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVTdGFydC5jYWxlbmRhcih7XG5cdFx0XHRmaXJzdERheU9mV2VlazogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJGaXJzdERheU9mV2Vlayxcblx0XHRcdHRleHQ6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyVGV4dCxcblx0XHRcdGVuZENhbGVuZGFyOiBvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVFbmQsXG5cdFx0XHR0eXBlOiAndGltZScsXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxuXHRcdFx0ZGlzYWJsZU1pbnV0ZTogdHJ1ZSxcblx0XHRcdGFtcG06IGZhbHNlLFxuXHRcdH0pO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZUVuZC5jYWxlbmRhcih7XG5cdFx0XHRmaXJzdERheU9mV2VlazogU2VtYW50aWNMb2NhbGl6YXRpb24uY2FsZW5kYXJGaXJzdERheU9mV2Vlayxcblx0XHRcdHRleHQ6IFNlbWFudGljTG9jYWxpemF0aW9uLmNhbGVuZGFyVGV4dCxcblx0XHRcdHN0YXJ0Q2FsZW5kYXI6IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlVGltZVN0YXJ0LFxuXHRcdFx0dHlwZTogJ3RpbWUnLFxuXHRcdFx0aW5saW5lOiBmYWxzZSxcblx0XHRcdGRpc2FibGVNaW51dGU6IHRydWUsXG5cdFx0XHRhbXBtOiBmYWxzZSxcblx0XHRcdG9uQ2hhbmdlOiAobmV3VGltZVRvKSA9PiB7XG5cdFx0XHRcdGxldCBvbGRUaW1lVG8gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiR0aW1lX3RvLmF0dHIoJ3ZhbHVlJyk7XG5cdFx0XHRcdGlmIChuZXdUaW1lVG8gIT09IG51bGwgJiYgb2xkVGltZVRvICE9PSAnJykge1xuXHRcdFx0XHRcdG9sZFRpbWVUbyA9IG5ldyBEYXRlKG9sZFRpbWVUbyAqIDEwMDApO1xuXHRcdFx0XHRcdGlmICgobmV3VGltZVRvIC0gb2xkVGltZVRvKSAhPT0gMCkge1xuXHRcdFx0XHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kdGltZV90by50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cdFx0JCgnI2FjdGlvbicpXG5cdFx0XHQuZHJvcGRvd24oe1xuXHRcdFx0XHRvbkNoYW5nZSgpIHtcblx0XHRcdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLnRvZ2dsZURpc2FibGVkRmllbGRDbGFzcygpO1xuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0JCgnI3dlZWtkYXlfZnJvbScpXG5cdFx0XHQuZHJvcGRvd24oe1xuXHRcdFx0XHRvbkNoYW5nZSgpIHtcblx0XHRcdFx0XHRjb25zdCBmcm9tID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWUnLCAnd2Vla2RheV9mcm9tJyk7XG5cdFx0XHRcdFx0Y29uc3QgdG8gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICd3ZWVrZGF5X3RvJyk7XG5cdFx0XHRcdFx0aWYgKGZyb20gPCB0byB8fCB0byA9PT0gLTEgfHwgZnJvbSA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ3dlZWtkYXlfdG8nLCBmcm9tKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblx0XHQkKCcjd2Vla2RheV90bycpXG5cdFx0XHQuZHJvcGRvd24oe1xuXHRcdFx0XHRvbkNoYW5nZSgpIHtcblx0XHRcdFx0XHRjb25zdCBmcm9tID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWUnLCAnd2Vla2RheV9mcm9tJyk7XG5cdFx0XHRcdFx0Y29uc3QgdG8gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICd3ZWVrZGF5X3RvJyk7XG5cdFx0XHRcdFx0aWYgKHRvIDwgZnJvbSB8fCBmcm9tID09PSAtMSkge1xuXHRcdFx0XHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWUnLCAnd2Vla2RheV9mcm9tJywgdG8pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0JCgnI2VyYXNlLWRhdGVzJykub24oJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c1N0YXJ0LmNhbGVuZGFyKCdjbGVhcicpO1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLmNhbGVuZGFyKCdjbGVhcicpO1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kZm9ybU9ialxuXHRcdFx0XHQuZm9ybSgnc2V0IHZhbHVlcycsIHtcblx0XHRcdFx0XHRkYXRlX2Zyb206ICcnLFxuXHRcdFx0XHRcdGRhdGVfdG86ICcnLFxuXHRcdFx0XHR9KTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblxuXHRcdCQoJyNlcmFzZS13ZWVrZGF5cycpLm9uKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqXG5cdFx0XHRcdC5mb3JtKCdzZXQgdmFsdWVzJywge1xuXHRcdFx0XHRcdHdlZWtkYXlfZnJvbTogLTEsXG5cdFx0XHRcdFx0d2Vla2RheV90bzogLTEsXG5cdFx0XHRcdH0pO1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSk7XG5cdFx0JCgnI2VyYXNlLXRpbWVwZXJpb2QnKS5vbignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VUaW1lU3RhcnQuY2FsZW5kYXIoJ2NsZWFyJyk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRyYW5nZVRpbWVFbmQuY2FsZW5kYXIoJ2NsZWFyJyk7XG5cdFx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiR0aW1lX3RvLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQuaW5pdGlhbGl6ZUZvcm0oKTtcblx0XHRvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3J3YXJkaW5nU2VsZWN0RHJvcGRvd24uZHJvcGRvd24oRXh0ZW5zaW9ucy5nZXREcm9wZG93blNldHRpbmdzV2l0aG91dEVtcHR5KCkpO1xuXHRcdG91dE9mV29ya1RpbWVSZWNvcmQudG9nZ2xlRGlzYWJsZWRGaWVsZENsYXNzKCk7XG5cdFx0b3V0T2ZXb3JrVGltZVJlY29yZC5jaGFuZ2VEYXRlRm9ybWF0KCk7XG5cdH0sXG5cdC8qKlxuXHQgKiDQnNC10L3Rj9C10YIg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LUg0LTQsNGC0Ysg0L3QsNGH0LDQu9CwINC4INC00LDRgtGLINC+0LrQvtC90YfQsNC90LjRjyDQuNC3IGxpbnV4dGltZSDQsiDQu9C+0LrQsNC70YzQvdC+0LUg0L/RgNC10LTRgdGC0LDQstC70LXQvdC40LVcblx0ICovXG5cdGNoYW5nZURhdGVGb3JtYXQoKSB7XG5cdFx0Y29uc3QgZGF0ZUZyb20gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRkYXRlX2Zyb20uYXR0cigndmFsdWUnKTtcblx0XHRjb25zdCBkYXRlVG8gPSBvdXRPZldvcmtUaW1lUmVjb3JkLiRkYXRlX3RvLmF0dHIoJ3ZhbHVlJyk7XG5cdFx0aWYgKGRhdGVGcm9tICE9PSB1bmRlZmluZWQgJiYgZGF0ZUZyb20ubGVuZ3RoID4gMCkge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoJ3NldCBkYXRlJywgbmV3IERhdGUoZGF0ZUZyb20gKiAxMDAwKSk7XG5cdFx0XHQvLyBvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICdkYXRlX2Zyb20nLCBkYXRlRnJvbSk7XG5cdFx0fVxuXHRcdGlmIChkYXRlVG8gIT09IHVuZGVmaW5lZCAmJiBkYXRlVG8ubGVuZ3RoID4gMCkge1xuXHRcdFx0b3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzRW5kLmNhbGVuZGFyKCdzZXQgZGF0ZScsIG5ldyBEYXRlKGRhdGVUbyAqIDEwMDApKTtcblx0XHRcdC8vIG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ2RhdGVfdG8nLCBkYXRlVG8pO1xuXHRcdH1cblx0fSxcblx0dG9nZ2xlRGlzYWJsZWRGaWVsZENsYXNzKCkge1xuXHRcdGlmIChvdXRPZldvcmtUaW1lUmVjb3JkLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZScsICdhY3Rpb24nKSA9PT0gJ2V4dGVuc2lvbicpIHtcblx0XHRcdCQoJyNleHRlbnNpb24tZ3JvdXAnKS5zaG93KCk7XG5cdFx0XHQkKCcjYXVkaW8tZmlsZS1ncm91cCcpLmhpZGUoKTtcblx0XHRcdCQoJyNhdWRpb19tZXNzYWdlX2lkJykuZHJvcGRvd24oJ2NsZWFyJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJyNleHRlbnNpb24tZ3JvdXAnKS5oaWRlKCk7XG5cdFx0XHQkKCcjYXVkaW8tZmlsZS1ncm91cCcpLnNob3coKTtcblx0XHRcdG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnc2V0IHZhbHVlJywgJ2V4dGVuc2lvbicsIC0xKTtcblx0XHR9XG5cdH0sXG5cdC8qKlxuXHQgKiDQmtCw0YHRgtC+0LzQvdCw0Y8g0L/RgNC+0LLQtdGA0LrQsCDQv9C+0LvQtdC5INGE0L7RgNC80YssINC60L7RgtC+0YDRi9C1INC90LUg0L/QvtC70YPRh9Cw0LXRgtGB0Y8g0YHQtNC10LvQsNGC0Ywg0YfQtdGA0LXQtyDQstCw0LvQuNC00LDRhtC40Y5cblx0ICogQHBhcmFtIHJlc3VsdFxuXHQgKiBAcmV0dXJucyB7Kn1cblx0ICovXG5cdGN1c3RvbVZhbGlkYXRlRm9ybShyZXN1bHQpIHtcblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINC00LDRgtGLXG5cdFx0aWYgKChyZXN1bHQuZGF0YS5kYXRlX2Zyb20gIT09ICcnICYmIHJlc3VsdC5kYXRhLmRhdGVfdG8gPT09ICcnKVxuXHRcdFx0fHwgKHJlc3VsdC5kYXRhLmRhdGVfdG8gIT09ICcnICYmIHJlc3VsdC5kYXRhLmRhdGVfZnJvbSA9PT0gJycpKSB7XG5cdFx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoZ2xvYmFsVHJhbnNsYXRlLnRmX1ZhbGlkYXRlQ2hlY2tEYXRlSW50ZXJ2YWwpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdC8vINCf0YDQvtCy0LXRgNC40Lwg0L/QvtC70Y8g0LTQvdC10Lkg0L3QtdC00LXQu9C4XG5cdFx0aWYgKChyZXN1bHQuZGF0YS53ZWVrZGF5X2Zyb20gPiAwICYmIHJlc3VsdC5kYXRhLndlZWtkYXlfdG8gPT09ICctMScpXG5cdFx0XHR8fCAocmVzdWx0LmRhdGEud2Vla2RheV90byA+IDAgJiYgcmVzdWx0LmRhdGEud2Vla2RheV9mcm9tID09PSAnLTEnKSkge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrV2Vla0RheUludGVydmFsKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINCy0YDQtdC80LXQvdC4XG5cdFx0aWYgKChyZXN1bHQuZGF0YS50aW1lX2Zyb20ubGVuZ3RoID4gMCAmJiByZXN1bHQuZGF0YS50aW1lX3RvLmxlbmd0aCA9PT0gMClcblx0XHRcdHx8IChyZXN1bHQuZGF0YS50aW1lX3RvLmxlbmd0aCA+IDAgJiYgcmVzdWx0LmRhdGEudGltZV9mcm9tLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVDaGVja1RpbWVJbnRlcnZhbCkuc2hvdygpO1xuXHRcdFx0Rm9ybS4kc3VibWl0QnV0dG9uLnRyYW5zaXRpb24oJ3NoYWtlJykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHQvLyDQn9GA0L7QstC10YDQuNC8INC/0L7Qu9GPINCy0YDQtdC80LXQvdC4INC90LAg0YHQvtCx0LvRjtC00LXQvdC40LUg0YTQvtGA0LzQsNGC0YNcblx0XHRpZiAoKHJlc3VsdC5kYXRhLnRpbWVfZnJvbS5sZW5ndGggPiAwICYmIHJlc3VsdC5kYXRhLnRpbWVfdG8ubGVuZ3RoID09PSAwKVxuXHRcdFx0fHwgKHJlc3VsdC5kYXRhLnRpbWVfdG8ubGVuZ3RoID4gMCAmJiByZXN1bHQuZGF0YS50aW1lX2Zyb20ubGVuZ3RoID09PSAwKSkge1xuXHRcdFx0JCgnLmZvcm0gLmVycm9yLm1lc3NhZ2UnKS5odG1sKGdsb2JhbFRyYW5zbGF0ZS50Zl9WYWxpZGF0ZUNoZWNrVGltZUludGVydmFsKS5zaG93KCk7XG5cdFx0XHRGb3JtLiRzdWJtaXRCdXR0b24udHJhbnNpdGlvbignc2hha2UnKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8g0J/RgNC+0LLQtdGA0LjQvCDQstGB0LUg0L/QvtC70Y9cblx0XHRpZiAocmVzdWx0LmRhdGEudGltZV9mcm9tID09PSAnJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEudGltZV90byA9PT0gJydcblx0XHRcdCYmIHJlc3VsdC5kYXRhLndlZWtkYXlfZnJvbSA9PT0gJy0xJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEud2Vla2RheV90byA9PT0gJy0xJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEuZGF0ZV9mcm9tID09PSAnJ1xuXHRcdFx0JiYgcmVzdWx0LmRhdGEuZGF0ZV90byA9PT0gJycpIHtcblx0XHRcdCQoJy5mb3JtIC5lcnJvci5tZXNzYWdlJykuaHRtbChnbG9iYWxUcmFuc2xhdGUudGZfVmFsaWRhdGVOb1J1bGVzU2VsZWN0ZWQpLnNob3coKTtcblx0XHRcdEZvcm0uJHN1Ym1pdEJ1dHRvbi50cmFuc2l0aW9uKCdzaGFrZScpLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRjb25zdCByZXN1bHQgPSBzZXR0aW5ncztcblx0XHQkKCcuZm9ybSAuZXJyb3IubWVzc2FnZScpLmh0bWwoJycpLmhpZGUoKTtcblx0XHRyZXN1bHQuZGF0YSA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlcycpO1xuXHRcdGNvbnN0IGRhdGVGcm9tID0gb3V0T2ZXb3JrVGltZVJlY29yZC4kcmFuZ2VEYXlzU3RhcnQuY2FsZW5kYXIoJ2dldCBkYXRlJyk7XG5cdFx0aWYgKGRhdGVGcm9tICE9PSBudWxsKSB7XG5cdFx0XHRkYXRlRnJvbS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblx0XHRcdHJlc3VsdC5kYXRhLmRhdGVfZnJvbSA9IE1hdGgucm91bmQoZGF0ZUZyb20uZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0fVxuXHRcdGNvbnN0IGRhdGVUbyA9IG91dE9mV29ya1RpbWVSZWNvcmQuJHJhbmdlRGF5c0VuZC5jYWxlbmRhcignZ2V0IGRhdGUnKTtcblx0XHRpZiAoZGF0ZVRvICE9PSBudWxsKSB7XG5cdFx0XHRkYXRlVG8uc2V0SG91cnMoMjMsIDU5LCA1OSwgMCk7XG5cdFx0XHRyZXN1bHQuZGF0YS5kYXRlX3RvID0gTWF0aC5yb3VuZChkYXRlVG8uZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0fVxuXHRcdHJldHVybiBvdXRPZldvcmtUaW1lUmVjb3JkLmN1c3RvbVZhbGlkYXRlRm9ybShyZXN1bHQpO1xuXHR9LFxuXHRjYkFmdGVyU2VuZEZvcm0oKSB7XG5cblx0fSxcblx0aW5pdGlhbGl6ZUZvcm0oKSB7XG5cdFx0Rm9ybS4kZm9ybU9iaiA9IG91dE9mV29ya1RpbWVSZWNvcmQuJGZvcm1PYmo7XG5cdFx0Rm9ybS51cmwgPSBgJHtnbG9iYWxSb290VXJsfW91dC1vZmYtd29yay10aW1lL3NhdmVgO1xuXHRcdEZvcm0udmFsaWRhdGVSdWxlcyA9IG91dE9mV29ya1RpbWVSZWNvcmQudmFsaWRhdGVSdWxlcztcblx0XHRGb3JtLmNiQmVmb3JlU2VuZEZvcm0gPSBvdXRPZldvcmtUaW1lUmVjb3JkLmNiQmVmb3JlU2VuZEZvcm07XG5cdFx0Rm9ybS5jYkFmdGVyU2VuZEZvcm0gPSBvdXRPZldvcmtUaW1lUmVjb3JkLmNiQWZ0ZXJTZW5kRm9ybTtcblx0XHRGb3JtLmluaXRpYWxpemUoKTtcblx0fSxcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0b3V0T2ZXb3JrVGltZVJlY29yZC5pbml0aWFsaXplKCk7XG59KTtcbiJdfQ==