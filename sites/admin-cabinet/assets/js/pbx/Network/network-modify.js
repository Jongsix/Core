"use strict";

/*
 * Copyright (C) MIKO LLC - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Nikolay Beketov, 12 2019
 *
 */

/* global globalRootUrl,globalTranslate, Form, PbxApi */
var networks = {
  $getMyIpButton: $('#getmyip'),
  $formObj: $('#network-form'),
  $dropDowns: $('#network-form .dropdown'),
  $extipaddr: $('#extipaddr'),
  vlansArray: {},
  validateRules: {
    gateway: {
      optional: true,
      rules: [{
        type: 'ipaddr',
        prompt: globalTranslate.nw_ValidateIppaddrNotRight
      }]
    },
    primarydns: {
      optional: true,
      rules: [{
        type: 'ipaddr',
        prompt: globalTranslate.nw_ValidateIppaddrNotRight
      }]
    },
    secondarydns: {
      optional: true,
      rules: [{
        type: 'ipaddr',
        prompt: globalTranslate.nw_ValidateIppaddrNotRight
      }]
    },
    extipaddr: {
      optional: true,
      rules: [{
        type: 'ipaddrWithPortOptional',
        prompt: globalTranslate.nw_ValidateExtIppaddrNotRight
      }, {
        type: 'extenalIpHost',
        prompt: globalTranslate.nw_ValidateExtIppaddrOrHostIsEmpty
      }]
    },
    exthostname: {
      depends: 'usenat',
      rules: [{
        type: 'extenalIpHost',
        prompt: globalTranslate.nw_ValidateExtIppaddrOrHostIsEmpty
      }]
    }
  },
  initialize: function () {
    function initialize() {
      networks.toggleDisabledFieldClass();
      $('#eth-interfaces-menu .item').tab();
      $('#usenat-checkbox').checkbox({
        onChange: function () {
          function onChange() {
            networks.toggleDisabledFieldClass();
          }

          return onChange;
        }()
      });
      networks.$dropDowns.dropdown();
      $('.dhcp-checkbox').checkbox({
        onChange: function () {
          function onChange() {
            networks.toggleDisabledFieldClass();
          }

          return onChange;
        }()
      });
      networks.$getMyIpButton.on('click', function (e) {
        e.preventDefault();
        networks.$getMyIpButton.addClass('loading disabled');
        PbxApi.GetExternalIp(networks.cbAfterGetExternalIp);
      }); // Удаление дополнительного сетевого интерфейса

      $('.delete-interface').api({
        url: "".concat(globalRootUrl, "network/delete/{value}"),
        method: 'POST',
        beforeSend: function () {
          function beforeSend(settings) {
            $(this).addClass('loading disabled');
            return settings;
          }

          return beforeSend;
        }(),
        onSuccess: function () {
          function onSuccess(response) {
            $(this).removeClass('loading disabled');
            $('.ui.message.ajax').remove();
            $.each(response.message, function (index, value) {
              networks.$formObj.after("<div class=\"ui ".concat(index, " message ajax\">").concat(value, "</div>"));
            });
            if (response.success) window.location.reload();
          }

          return onSuccess;
        }(),
        onFailure: function () {
          function onFailure(response) {
            $(this).removeClass('loading disabled');
            $('form').after(response);
          }

          return onFailure;
        }()
      }); // Очистка настроек дополнительного сетевого

      $('.delete-interface-0').on('click', function () {
        var initialValues = {
          interface_0: '',
          name_0: '',
          dhcp_0: 'on',
          ipaddr_0: '',
          subnet_0: '0'
        };
        networks.$formObj.form('set values', initialValues);
        $('#interface_0').dropdown('restore defaults');
        $('#dhcp-0-checkbox').checkbox('check');
        $('#eth-interfaces-menu .item').tab('change tab', $('#eth-interfaces-menu a.item').first().attr('data-tab'));
      });
      networks.initializeForm();
    }

    return initialize;
  }(),

  /**
   * Gets external IP by request to remote server
   */
  cbAfterGetExternalIp: function () {
    function cbAfterGetExternalIp(response) {
      if (response === false) {
        networks.$getMyIpButton.removeClass('loading disabled');
      } else {
        networks.$formObj.form('set value', 'extipaddr', response.ip);
        networks.$extipaddr.trigger('change');
        networks.$getMyIpButton.removeClass('loading disabled');
      }
    }

    return cbAfterGetExternalIp;
  }(),
  toggleDisabledFieldClass: function () {
    function toggleDisabledFieldClass() {
      $('#eth-interfaces-menu a').each(function (index, obj) {
        var eth = $(obj).attr('data-tab');

        if ($("#dhcp-".concat(eth, "-checkbox")).checkbox('is unchecked')) {
          $("#ip-address-group-".concat(eth)).removeClass('disabled');
          $("#not-dhcp-".concat(eth)).val('1');
        } else {
          $("#ip-address-group-".concat(eth)).addClass('disabled');
          $("#not-dhcp-".concat(eth)).val('');
        }

        networks.addNewFormRules(eth);
      });

      if ($('#usenat-checkbox').checkbox('is checked')) {
        $('.nated-settings-group').removeClass('disabled');
      } else {
        $('.nated-settings-group').addClass('disabled');
      }
    }

    return toggleDisabledFieldClass;
  }(),
  addNewFormRules: function () {
    function addNewFormRules(newRowId) {
      var nameClass = "name_".concat(newRowId);
      networks.validateRules[nameClass] = {
        identifier: nameClass,
        depends: "interface_".concat(newRowId),
        rules: [{
          type: 'empty',
          prompt: globalTranslate.nw_ValidateNameIsNotBeEmpty
        }]
      };
      var vlanClass = "vlanid_".concat(newRowId);
      networks.validateRules[vlanClass] = {
        depends: "interface_".concat(newRowId),
        identifier: vlanClass,
        rules: [{
          type: 'integer[0..4095]',
          prompt: globalTranslate.nw_ValidateVlanRange
        }, {
          type: "checkVlan[".concat(newRowId, "]"),
          prompt: globalTranslate.nw_ValidateVlanCross
        }]
      };
      var ipaddrClass = "ipaddr_".concat(newRowId);
      networks.validateRules[ipaddrClass] = {
        identifier: ipaddrClass,
        depends: "not-dhcp-".concat(newRowId),
        rules: [{
          type: 'empty',
          prompt: globalTranslate.nw_ValidateIppaddrIsEmpty
        }, {
          type: 'ipaddr',
          prompt: globalTranslate.nw_ValidateIppaddrNotRight
        }]
      };
      var dhcpClass = "dhcp_".concat(newRowId);
      networks.validateRules[dhcpClass] = {
        identifier: dhcpClass,
        depends: "interface_".concat(newRowId),
        rules: [{
          type: "dhcpOnVlanNetworks[".concat(newRowId, "]"),
          prompt: globalTranslate.nw_ValidateDHCPOnVlansDontSupport
        }]
      };
    }

    return addNewFormRules;
  }(),
  cbBeforeSendForm: function () {
    function cbBeforeSendForm(settings) {
      var result = settings;
      result.data = networks.$formObj.form('get values');
      return result;
    }

    return cbBeforeSendForm;
  }(),
  cbAfterSendForm: function () {
    function cbAfterSendForm() {}

    return cbAfterSendForm;
  }(),
  initializeForm: function () {
    function initializeForm() {
      Form.$formObj = networks.$formObj;
      Form.url = "".concat(globalRootUrl, "network/save");
      Form.validateRules = networks.validateRules;
      Form.cbBeforeSendForm = networks.cbBeforeSendForm;
      Form.cbAfterSendForm = networks.cbAfterSendForm;
      Form.initialize();
    }

    return initializeForm;
  }()
};

$.fn.form.settings.rules.ipaddr = function (value) {
  var result = true;
  var f = value.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);

  if (f == null) {
    result = false;
  } else {
    for (var i = 1; i < 5; i += 1) {
      var a = f[i];

      if (a > 255) {
        result = false;
      }
    }

    if (f[5] > 32) {
      result = false;
    }
  }

  return result;
};

$.fn.form.settings.rules.ipaddrWithPortOptional = function (value) {
  var result = true;
  var f = value.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})(:[0-9]+)?$/);

  if (f == null) {
    result = false;
  } else {
    for (var i = 1; i < 5; i += 1) {
      var a = f[i];

      if (a > 255) {
        result = false;
      }
    }

    if (f[5] > 32) {
      result = false;
    }
  }

  return result;
};

$.fn.form.settings.rules.checkVlan = function (vlanValue, param) {
  var result = true;
  var vlansArray = {};
  var allValues = networks.$formObj.form('get values');

  if (allValues.interface_0 !== undefined && allValues.interface_0 > 0) {
    var newEthName = allValues["interface_".concat(allValues.interface_0)];
    vlansArray[newEthName] = [allValues.vlanid_0];

    if (allValues.vlanid_0 === '') {
      result = false;
    }
  }

  $.each(allValues, function (index, value) {
    if (index === 'interface_0' || index === 'vlanid_0') return;

    if (index.indexOf('vlanid') >= 0) {
      var ethName = allValues["interface_".concat(index.split('_')[1])];

      if ($.inArray(value, vlansArray[ethName]) >= 0 && vlanValue === value && param === index.split('_')[1]) {
        result = false;
      } else {
        if (!(ethName in vlansArray)) {
          vlansArray[ethName] = [];
        }

        vlansArray[ethName].push(value);
      }
    }
  });
  return result;
};

$.fn.form.settings.rules.dhcpOnVlanNetworks = function (value, param) {
  var result = true;
  var vlanValue = networks.$formObj.form('get value', "vlanid_".concat(param));
  var dhcpValue = networks.$formObj.form('get value', "dhcp_".concat(param));

  if (vlanValue > 0 && dhcpValue === 'on') {
    result = false;
  }

  return result;
};

$.fn.form.settings.rules.extenalIpHost = function () {
  var allValues = networks.$formObj.form('get values');

  if (allValues.usenat === 'on') {
    if (allValues.exthostname === '' && allValues.extipaddr === '') {
      return false;
    }
  }

  return true;
};

$(document).ready(function () {
  networks.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9OZXR3b3JrL25ldHdvcmstbW9kaWZ5LmpzIl0sIm5hbWVzIjpbIm5ldHdvcmtzIiwiJGdldE15SXBCdXR0b24iLCIkIiwiJGZvcm1PYmoiLCIkZHJvcERvd25zIiwiJGV4dGlwYWRkciIsInZsYW5zQXJyYXkiLCJ2YWxpZGF0ZVJ1bGVzIiwiZ2F0ZXdheSIsIm9wdGlvbmFsIiwicnVsZXMiLCJ0eXBlIiwicHJvbXB0IiwiZ2xvYmFsVHJhbnNsYXRlIiwibndfVmFsaWRhdGVJcHBhZGRyTm90UmlnaHQiLCJwcmltYXJ5ZG5zIiwic2Vjb25kYXJ5ZG5zIiwiZXh0aXBhZGRyIiwibndfVmFsaWRhdGVFeHRJcHBhZGRyTm90UmlnaHQiLCJud19WYWxpZGF0ZUV4dElwcGFkZHJPckhvc3RJc0VtcHR5IiwiZXh0aG9zdG5hbWUiLCJkZXBlbmRzIiwiaW5pdGlhbGl6ZSIsInRvZ2dsZURpc2FibGVkRmllbGRDbGFzcyIsInRhYiIsImNoZWNrYm94Iiwib25DaGFuZ2UiLCJkcm9wZG93biIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiYWRkQ2xhc3MiLCJQYnhBcGkiLCJHZXRFeHRlcm5hbElwIiwiY2JBZnRlckdldEV4dGVybmFsSXAiLCJhcGkiLCJ1cmwiLCJnbG9iYWxSb290VXJsIiwibWV0aG9kIiwiYmVmb3JlU2VuZCIsInNldHRpbmdzIiwib25TdWNjZXNzIiwicmVzcG9uc2UiLCJyZW1vdmVDbGFzcyIsInJlbW92ZSIsImVhY2giLCJtZXNzYWdlIiwiaW5kZXgiLCJ2YWx1ZSIsImFmdGVyIiwic3VjY2VzcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwib25GYWlsdXJlIiwiaW5pdGlhbFZhbHVlcyIsImludGVyZmFjZV8wIiwibmFtZV8wIiwiZGhjcF8wIiwiaXBhZGRyXzAiLCJzdWJuZXRfMCIsImZvcm0iLCJmaXJzdCIsImF0dHIiLCJpbml0aWFsaXplRm9ybSIsImlwIiwidHJpZ2dlciIsIm9iaiIsImV0aCIsInZhbCIsImFkZE5ld0Zvcm1SdWxlcyIsIm5ld1Jvd0lkIiwibmFtZUNsYXNzIiwiaWRlbnRpZmllciIsIm53X1ZhbGlkYXRlTmFtZUlzTm90QmVFbXB0eSIsInZsYW5DbGFzcyIsIm53X1ZhbGlkYXRlVmxhblJhbmdlIiwibndfVmFsaWRhdGVWbGFuQ3Jvc3MiLCJpcGFkZHJDbGFzcyIsIm53X1ZhbGlkYXRlSXBwYWRkcklzRW1wdHkiLCJkaGNwQ2xhc3MiLCJud19WYWxpZGF0ZURIQ1BPblZsYW5zRG9udFN1cHBvcnQiLCJjYkJlZm9yZVNlbmRGb3JtIiwicmVzdWx0IiwiZGF0YSIsImNiQWZ0ZXJTZW5kRm9ybSIsIkZvcm0iLCJmbiIsImlwYWRkciIsImYiLCJtYXRjaCIsImkiLCJhIiwiaXBhZGRyV2l0aFBvcnRPcHRpb25hbCIsImNoZWNrVmxhbiIsInZsYW5WYWx1ZSIsInBhcmFtIiwiYWxsVmFsdWVzIiwidW5kZWZpbmVkIiwibmV3RXRoTmFtZSIsInZsYW5pZF8wIiwiaW5kZXhPZiIsImV0aE5hbWUiLCJzcGxpdCIsImluQXJyYXkiLCJwdXNoIiwiZGhjcE9uVmxhbk5ldHdvcmtzIiwiZGhjcFZhbHVlIiwiZXh0ZW5hbElwSG9zdCIsInVzZW5hdCIsImRvY3VtZW50IiwicmVhZHkiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7O0FBUUE7QUFFQSxJQUFNQSxRQUFRLEdBQUc7QUFDaEJDLEVBQUFBLGNBQWMsRUFBRUMsQ0FBQyxDQUFDLFVBQUQsQ0FERDtBQUVoQkMsRUFBQUEsUUFBUSxFQUFFRCxDQUFDLENBQUMsZUFBRCxDQUZLO0FBR2hCRSxFQUFBQSxVQUFVLEVBQUVGLENBQUMsQ0FBQyx5QkFBRCxDQUhHO0FBSWhCRyxFQUFBQSxVQUFVLEVBQUNILENBQUMsQ0FBQyxZQUFELENBSkk7QUFLaEJJLEVBQUFBLFVBQVUsRUFBRSxFQUxJO0FBTWhCQyxFQUFBQSxhQUFhLEVBQUU7QUFDZEMsSUFBQUEsT0FBTyxFQUFFO0FBQ1JDLE1BQUFBLFFBQVEsRUFBRSxJQURGO0FBRVJDLE1BQUFBLEtBQUss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QUFRLENBQUNHLFFBQVQsQ0FBa0IwRCxJQUFsQixDQUF1QixZQUF2QixDQUFsQjs7QUFDQSxNQUFJb0MsU0FBUyxDQUFDWSxNQUFWLEtBQXFCLElBQXpCLEVBQStCO0FBQzlCLFFBQUlaLFNBQVMsQ0FBQzdFLFdBQVYsS0FBMEIsRUFBMUIsSUFBZ0M2RSxTQUFTLENBQUNoRixTQUFWLEtBQXdCLEVBQTVELEVBQWdFO0FBQy9ELGFBQU8sS0FBUDtBQUNBO0FBQ0Q7O0FBQ0QsU0FBTyxJQUFQO0FBQ0EsQ0FSRDs7QUFVQWYsQ0FBQyxDQUFDNEcsUUFBRCxDQUFELENBQVlDLEtBQVosQ0FBa0IsWUFBTTtBQUN2Qi9HLEVBQUFBLFFBQVEsQ0FBQ3NCLFVBQVQ7QUFDQSxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoQykgTUlLTyBMTEMgLSBBbGwgUmlnaHRzIFJlc2VydmVkXG4gKiBVbmF1dGhvcml6ZWQgY29weWluZyBvZiB0aGlzIGZpbGUsIHZpYSBhbnkgbWVkaXVtIGlzIHN0cmljdGx5IHByb2hpYml0ZWRcbiAqIFByb3ByaWV0YXJ5IGFuZCBjb25maWRlbnRpYWxcbiAqIFdyaXR0ZW4gYnkgTmlrb2xheSBCZWtldG92LCAxMiAyMDE5XG4gKlxuICovXG5cbi8qIGdsb2JhbCBnbG9iYWxSb290VXJsLGdsb2JhbFRyYW5zbGF0ZSwgRm9ybSwgUGJ4QXBpICovXG5cbmNvbnN0IG5ldHdvcmtzID0ge1xuXHQkZ2V0TXlJcEJ1dHRvbjogJCgnI2dldG15aXAnKSxcblx0JGZvcm1PYmo6ICQoJyNuZXR3b3JrLWZvcm0nKSxcblx0JGRyb3BEb3duczogJCgnI25ldHdvcmstZm9ybSAuZHJvcGRvd24nKSxcblx0JGV4dGlwYWRkcjokKCcjZXh0aXBhZGRyJyksXG5cdHZsYW5zQXJyYXk6IHt9LFxuXHR2YWxpZGF0ZVJ1bGVzOiB7XG5cdFx0Z2F0ZXdheToge1xuXHRcdFx0b3B0aW9uYWw6IHRydWUsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2lwYWRkcicsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVJcHBhZGRyTm90UmlnaHQsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0cHJpbWFyeWRuczoge1xuXHRcdFx0b3B0aW9uYWw6IHRydWUsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2lwYWRkcicsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVJcHBhZGRyTm90UmlnaHQsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH0sXG5cdFx0c2Vjb25kYXJ5ZG5zOiB7XG5cdFx0XHRvcHRpb25hbDogdHJ1ZSxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnaXBhZGRyJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5ud19WYWxpZGF0ZUlwcGFkZHJOb3RSaWdodCxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0XHRleHRpcGFkZHI6IHtcblx0XHRcdG9wdGlvbmFsOiB0cnVlLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdpcGFkZHJXaXRoUG9ydE9wdGlvbmFsJyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5ud19WYWxpZGF0ZUV4dElwcGFkZHJOb3RSaWdodCxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdleHRlbmFsSXBIb3N0Jyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5ud19WYWxpZGF0ZUV4dElwcGFkZHJPckhvc3RJc0VtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9LFxuXHRcdGV4dGhvc3RuYW1lOiB7XG5cdFx0XHRkZXBlbmRzOiAndXNlbmF0Jyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZXh0ZW5hbElwSG9zdCcsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVFeHRJcHBhZGRyT3JIb3N0SXNFbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0fSxcblx0aW5pdGlhbGl6ZSgpIHtcblx0XHRuZXR3b3Jrcy50b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKTtcblx0XHQkKCcjZXRoLWludGVyZmFjZXMtbWVudSAuaXRlbScpLnRhYigpO1xuXG5cdFx0JCgnI3VzZW5hdC1jaGVja2JveCcpLmNoZWNrYm94KHtcblx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRuZXR3b3Jrcy50b2dnbGVEaXNhYmxlZEZpZWxkQ2xhc3MoKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cdFx0bmV0d29ya3MuJGRyb3BEb3ducy5kcm9wZG93bigpO1xuXHRcdCQoJy5kaGNwLWNoZWNrYm94Jylcblx0XHRcdC5jaGVja2JveCh7XG5cdFx0XHRcdG9uQ2hhbmdlKCkge1xuXHRcdFx0XHRcdG5ldHdvcmtzLnRvZ2dsZURpc2FibGVkRmllbGRDbGFzcygpO1xuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0bmV0d29ya3MuJGdldE15SXBCdXR0b24ub24oJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG5ldHdvcmtzLiRnZXRNeUlwQnV0dG9uLmFkZENsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0XHRQYnhBcGkuR2V0RXh0ZXJuYWxJcChuZXR3b3Jrcy5jYkFmdGVyR2V0RXh0ZXJuYWxJcCk7XG5cdFx0fSk7XG5cblx0XHQvLyDQo9C00LDQu9C10L3QuNC1INC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdC+0LPQviDRgdC10YLQtdCy0L7Qs9C+INC40L3RgtC10YDRhNC10LnRgdCwXG5cdFx0JCgnLmRlbGV0ZS1pbnRlcmZhY2UnKS5hcGkoe1xuXHRcdFx0dXJsOiBgJHtnbG9iYWxSb290VXJsfW5ldHdvcmsvZGVsZXRlL3t2YWx1ZX1gLFxuXHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRiZWZvcmVTZW5kKHNldHRpbmdzKSB7XG5cdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdFx0cmV0dXJuIHNldHRpbmdzO1xuXHRcdFx0fSxcblxuXHRcdFx0b25TdWNjZXNzKHJlc3BvbnNlKSB7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHRcdFx0JCgnLnVpLm1lc3NhZ2UuYWpheCcpLnJlbW92ZSgpO1xuXHRcdFx0XHQkLmVhY2gocmVzcG9uc2UubWVzc2FnZSwgKGluZGV4LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdG5ldHdvcmtzLiRmb3JtT2JqLmFmdGVyKGA8ZGl2IGNsYXNzPVwidWkgJHtpbmRleH0gbWVzc2FnZSBhamF4XCI+JHt2YWx1ZX08L2Rpdj5gKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChyZXNwb25zZS5zdWNjZXNzKSB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cdFx0XHR9LFxuXG5cdFx0XHRvbkZhaWx1cmUocmVzcG9uc2UpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnbG9hZGluZyBkaXNhYmxlZCcpO1xuXHRcdFx0XHQkKCdmb3JtJykuYWZ0ZXIocmVzcG9uc2UpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vINCe0YfQuNGB0YLQutCwINC90LDRgdGC0YDQvtC10Log0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90L7Qs9C+INGB0LXRgtC10LLQvtCz0L5cblx0XHQkKCcuZGVsZXRlLWludGVyZmFjZS0wJykub24oJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0Y29uc3QgaW5pdGlhbFZhbHVlcyA9IHtcblx0XHRcdFx0aW50ZXJmYWNlXzA6ICcnLFxuXHRcdFx0XHRuYW1lXzA6ICcnLFxuXHRcdFx0XHRkaGNwXzA6ICdvbicsXG5cdFx0XHRcdGlwYWRkcl8wOiAnJyxcblx0XHRcdFx0c3VibmV0XzA6ICcwJyxcblx0XHRcdH07XG5cdFx0XHRuZXR3b3Jrcy4kZm9ybU9iai5mb3JtKCdzZXQgdmFsdWVzJywgaW5pdGlhbFZhbHVlcyk7XG5cdFx0XHQkKCcjaW50ZXJmYWNlXzAnKS5kcm9wZG93bigncmVzdG9yZSBkZWZhdWx0cycpO1xuXHRcdFx0JCgnI2RoY3AtMC1jaGVja2JveCcpLmNoZWNrYm94KCdjaGVjaycpO1xuXHRcdFx0JCgnI2V0aC1pbnRlcmZhY2VzLW1lbnUgLml0ZW0nKS50YWIoJ2NoYW5nZSB0YWInLCAkKCcjZXRoLWludGVyZmFjZXMtbWVudSBhLml0ZW0nKS5maXJzdCgpLmF0dHIoJ2RhdGEtdGFiJykpO1xuXHRcdH0pO1xuXG5cdFx0bmV0d29ya3MuaW5pdGlhbGl6ZUZvcm0oKTtcblx0fSxcblx0LyoqXG5cdCAqIEdldHMgZXh0ZXJuYWwgSVAgYnkgcmVxdWVzdCB0byByZW1vdGUgc2VydmVyXG5cdCAqL1xuXHRjYkFmdGVyR2V0RXh0ZXJuYWxJcChyZXNwb25zZSkge1xuXHRcdGlmIChyZXNwb25zZSA9PT0gZmFsc2UpIHtcblx0XHRcdG5ldHdvcmtzLiRnZXRNeUlwQnV0dG9uLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGRpc2FibGVkJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5ldHdvcmtzLiRmb3JtT2JqLmZvcm0oJ3NldCB2YWx1ZScsICdleHRpcGFkZHInLCByZXNwb25zZS5pcCk7XG5cdFx0XHRuZXR3b3Jrcy4kZXh0aXBhZGRyLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0bmV0d29ya3MuJGdldE15SXBCdXR0b24ucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcgZGlzYWJsZWQnKTtcblx0XHR9XG5cdH0sXG5cdHRvZ2dsZURpc2FibGVkRmllbGRDbGFzcygpIHtcblx0XHQkKCcjZXRoLWludGVyZmFjZXMtbWVudSBhJykuZWFjaCgoaW5kZXgsIG9iaikgPT4ge1xuXHRcdFx0Y29uc3QgZXRoID0gJChvYmopLmF0dHIoJ2RhdGEtdGFiJyk7XG5cdFx0XHRpZiAoJChgI2RoY3AtJHtldGh9LWNoZWNrYm94YCkuY2hlY2tib3goJ2lzIHVuY2hlY2tlZCcpKSB7XG5cdFx0XHRcdCQoYCNpcC1hZGRyZXNzLWdyb3VwLSR7ZXRofWApLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdFx0XHQkKGAjbm90LWRoY3AtJHtldGh9YCkudmFsKCcxJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKGAjaXAtYWRkcmVzcy1ncm91cC0ke2V0aH1gKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblx0XHRcdFx0JChgI25vdC1kaGNwLSR7ZXRofWApLnZhbCgnJyk7XG5cdFx0XHR9XG5cdFx0XHRuZXR3b3Jrcy5hZGROZXdGb3JtUnVsZXMoZXRoKTtcblx0XHR9KTtcblxuXHRcdGlmICgkKCcjdXNlbmF0LWNoZWNrYm94JykuY2hlY2tib3goJ2lzIGNoZWNrZWQnKSkge1xuXHRcdFx0JCgnLm5hdGVkLXNldHRpbmdzLWdyb3VwJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJy5uYXRlZC1zZXR0aW5ncy1ncm91cCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdH1cblx0fSxcblx0YWRkTmV3Rm9ybVJ1bGVzKG5ld1Jvd0lkKSB7XG5cdFx0Y29uc3QgbmFtZUNsYXNzID0gYG5hbWVfJHtuZXdSb3dJZH1gO1xuXHRcdG5ldHdvcmtzLnZhbGlkYXRlUnVsZXNbbmFtZUNsYXNzXSA9IHtcblx0XHRcdGlkZW50aWZpZXI6IG5hbWVDbGFzcyxcblx0XHRcdGRlcGVuZHM6IGBpbnRlcmZhY2VfJHtuZXdSb3dJZH1gLFxuXHRcdFx0cnVsZXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHR5cGU6ICdlbXB0eScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVOYW1lSXNOb3RCZUVtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblxuXHRcdH07XG5cblx0XHRjb25zdCB2bGFuQ2xhc3MgPSBgdmxhbmlkXyR7bmV3Um93SWR9YDtcblx0XHRuZXR3b3Jrcy52YWxpZGF0ZVJ1bGVzW3ZsYW5DbGFzc10gPSB7XG5cdFx0XHRkZXBlbmRzOiBgaW50ZXJmYWNlXyR7bmV3Um93SWR9YCxcblx0XHRcdGlkZW50aWZpZXI6IHZsYW5DbGFzcyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnaW50ZWdlclswLi40MDk1XScsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVWbGFuUmFuZ2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiBgY2hlY2tWbGFuWyR7bmV3Um93SWR9XWAsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVWbGFuQ3Jvc3MsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXG5cdFx0fTtcblxuXHRcdGNvbnN0IGlwYWRkckNsYXNzID0gYGlwYWRkcl8ke25ld1Jvd0lkfWA7XG5cdFx0bmV0d29ya3MudmFsaWRhdGVSdWxlc1tpcGFkZHJDbGFzc10gPSB7XG5cdFx0XHRpZGVudGlmaWVyOiBpcGFkZHJDbGFzcyxcblx0XHRcdGRlcGVuZHM6IGBub3QtZGhjcC0ke25ld1Jvd0lkfWAsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2VtcHR5Jyxcblx0XHRcdFx0XHRwcm9tcHQ6IGdsb2JhbFRyYW5zbGF0ZS5ud19WYWxpZGF0ZUlwcGFkZHJJc0VtcHR5LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogJ2lwYWRkcicsXG5cdFx0XHRcdFx0cHJvbXB0OiBnbG9iYWxUcmFuc2xhdGUubndfVmFsaWRhdGVJcHBhZGRyTm90UmlnaHQsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdH07XG5cblx0XHRjb25zdCBkaGNwQ2xhc3MgPSBgZGhjcF8ke25ld1Jvd0lkfWA7XG5cdFx0bmV0d29ya3MudmFsaWRhdGVSdWxlc1tkaGNwQ2xhc3NdID0ge1xuXHRcdFx0aWRlbnRpZmllcjogZGhjcENsYXNzLFxuXHRcdFx0ZGVwZW5kczogYGludGVyZmFjZV8ke25ld1Jvd0lkfWAsXG5cdFx0XHRydWxlczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogYGRoY3BPblZsYW5OZXR3b3Jrc1ske25ld1Jvd0lkfV1gLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLm53X1ZhbGlkYXRlREhDUE9uVmxhbnNEb250U3VwcG9ydCxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fTtcblxuXHR9LFxuXHRjYkJlZm9yZVNlbmRGb3JtKHNldHRpbmdzKSB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gc2V0dGluZ3M7XG5cdFx0cmVzdWx0LmRhdGEgPSBuZXR3b3Jrcy4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblx0Y2JBZnRlclNlbmRGb3JtKCkge1xuXG5cdH0sXG5cdGluaXRpYWxpemVGb3JtKCkge1xuXHRcdEZvcm0uJGZvcm1PYmogPSBuZXR3b3Jrcy4kZm9ybU9iajtcblx0XHRGb3JtLnVybCA9IGAke2dsb2JhbFJvb3RVcmx9bmV0d29yay9zYXZlYDtcblx0XHRGb3JtLnZhbGlkYXRlUnVsZXMgPSBuZXR3b3Jrcy52YWxpZGF0ZVJ1bGVzO1xuXHRcdEZvcm0uY2JCZWZvcmVTZW5kRm9ybSA9IG5ldHdvcmtzLmNiQmVmb3JlU2VuZEZvcm07XG5cdFx0Rm9ybS5jYkFmdGVyU2VuZEZvcm0gPSBuZXR3b3Jrcy5jYkFmdGVyU2VuZEZvcm07XG5cdFx0Rm9ybS5pbml0aWFsaXplKCk7XG5cdH0sXG59O1xuXG4kLmZuLmZvcm0uc2V0dGluZ3MucnVsZXMuaXBhZGRyID0gKHZhbHVlKSA9PiB7XG5cdGxldCByZXN1bHQgPSB0cnVlO1xuXHRjb25zdCBmID0gdmFsdWUubWF0Y2goL14oXFxkezEsM30pXFwuKFxcZHsxLDN9KVxcLihcXGR7MSwzfSlcXC4oXFxkezEsM30pJC8pO1xuXHRpZiAoZiA9PSBudWxsKSB7XG5cdFx0cmVzdWx0ID0gZmFsc2U7XG5cdH0gZWxzZSB7XG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCA1OyBpICs9IDEpIHtcblx0XHRcdGNvbnN0IGEgPSBmW2ldO1xuXHRcdFx0aWYgKGEgPiAyNTUpIHtcblx0XHRcdFx0cmVzdWx0ID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChmWzVdID4gMzIpIHtcblx0XHRcdHJlc3VsdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuJC5mbi5mb3JtLnNldHRpbmdzLnJ1bGVzLmlwYWRkcldpdGhQb3J0T3B0aW9uYWwgPSAodmFsdWUpID0+IHtcblx0bGV0IHJlc3VsdCA9IHRydWU7XG5cdGNvbnN0IGYgPSB2YWx1ZS5tYXRjaCgvXihcXGR7MSwzfSlcXC4oXFxkezEsM30pXFwuKFxcZHsxLDN9KVxcLihcXGR7MSwzfSkoOlswLTldKyk/JC8pO1xuXHRpZiAoZiA9PSBudWxsKSB7XG5cdFx0cmVzdWx0ID0gZmFsc2U7XG5cdH0gZWxzZSB7XG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCA1OyBpICs9IDEpIHtcblx0XHRcdGNvbnN0IGEgPSBmW2ldO1xuXHRcdFx0aWYgKGEgPiAyNTUpIHtcblx0XHRcdFx0cmVzdWx0ID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChmWzVdID4gMzIpIHtcblx0XHRcdHJlc3VsdCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuJC5mbi5mb3JtLnNldHRpbmdzLnJ1bGVzLmNoZWNrVmxhbiA9ICh2bGFuVmFsdWUsIHBhcmFtKSA9PiB7XG5cdGxldCByZXN1bHQgPSB0cnVlO1xuXHRjb25zdCB2bGFuc0FycmF5ID0ge307XG5cdGNvbnN0IGFsbFZhbHVlcyA9IG5ldHdvcmtzLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZXMnKTtcblx0aWYgKGFsbFZhbHVlcy5pbnRlcmZhY2VfMCAhPT0gdW5kZWZpbmVkICYmIGFsbFZhbHVlcy5pbnRlcmZhY2VfMCA+IDApIHtcblx0XHRjb25zdCBuZXdFdGhOYW1lID0gYWxsVmFsdWVzW2BpbnRlcmZhY2VfJHthbGxWYWx1ZXMuaW50ZXJmYWNlXzB9YF07XG5cdFx0dmxhbnNBcnJheVtuZXdFdGhOYW1lXSA9IFthbGxWYWx1ZXMudmxhbmlkXzBdO1xuXHRcdGlmIChhbGxWYWx1ZXMudmxhbmlkXzAgPT09ICcnKSB7XG5cdFx0XHRyZXN1bHQgPSBmYWxzZTtcblx0XHR9XG5cdH1cblx0JC5lYWNoKGFsbFZhbHVlcywgKGluZGV4LCB2YWx1ZSkgPT4ge1xuXHRcdGlmIChpbmRleCA9PT0gJ2ludGVyZmFjZV8wJyB8fCBpbmRleCA9PT0gJ3ZsYW5pZF8wJykgcmV0dXJuO1xuXHRcdGlmIChpbmRleC5pbmRleE9mKCd2bGFuaWQnKSA+PSAwKSB7XG5cdFx0XHRjb25zdCBldGhOYW1lID0gYWxsVmFsdWVzW2BpbnRlcmZhY2VfJHtpbmRleC5zcGxpdCgnXycpWzFdfWBdO1xuXHRcdFx0aWYgKCQuaW5BcnJheSh2YWx1ZSwgdmxhbnNBcnJheVtldGhOYW1lXSkgPj0gMFxuXHRcdFx0XHQmJiB2bGFuVmFsdWUgPT09IHZhbHVlXG5cdFx0XHRcdCYmIHBhcmFtID09PSBpbmRleC5zcGxpdCgnXycpWzFdKSB7XG5cdFx0XHRcdHJlc3VsdCA9IGZhbHNlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCEoZXRoTmFtZSBpbiB2bGFuc0FycmF5KSkge1xuXHRcdFx0XHRcdHZsYW5zQXJyYXlbZXRoTmFtZV0gPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2bGFuc0FycmF5W2V0aE5hbWVdLnB1c2godmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cdHJldHVybiByZXN1bHQ7XG59O1xuXG4kLmZuLmZvcm0uc2V0dGluZ3MucnVsZXMuZGhjcE9uVmxhbk5ldHdvcmtzID0gKHZhbHVlLCBwYXJhbSkgPT4ge1xuXHRsZXQgcmVzdWx0ID0gdHJ1ZTtcblx0Y29uc3QgdmxhblZhbHVlID0gbmV0d29ya3MuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgYHZsYW5pZF8ke3BhcmFtfWApO1xuXHRjb25zdCBkaGNwVmFsdWUgPSBuZXR3b3Jrcy4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWUnLCBgZGhjcF8ke3BhcmFtfWApO1xuXHRpZiAodmxhblZhbHVlID4gMCAmJiBkaGNwVmFsdWUgPT09ICdvbicpIHtcblx0XHRyZXN1bHQgPSBmYWxzZTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTtcblxuJC5mbi5mb3JtLnNldHRpbmdzLnJ1bGVzLmV4dGVuYWxJcEhvc3QgPSAoKSA9PiB7XG5cdGNvbnN0IGFsbFZhbHVlcyA9IG5ldHdvcmtzLiRmb3JtT2JqLmZvcm0oJ2dldCB2YWx1ZXMnKTtcblx0aWYgKGFsbFZhbHVlcy51c2VuYXQgPT09ICdvbicpIHtcblx0XHRpZiAoYWxsVmFsdWVzLmV4dGhvc3RuYW1lID09PSAnJyAmJiBhbGxWYWx1ZXMuZXh0aXBhZGRyID09PSAnJykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0bmV0d29ya3MuaW5pdGlhbGl6ZSgpO1xufSk7XG4iXX0=