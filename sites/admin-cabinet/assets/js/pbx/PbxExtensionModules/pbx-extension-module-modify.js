"use strict";

/*
 * MikoPBX - free phone system for small business
 * Copyright (C) 2017-2020 Alexey Portnov and Nikolay Beketov
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.
 * If not, see <https://www.gnu.org/licenses/>.
 */

/* global globalRootUrl, Form, globalTranslate */

/**
 * Мониторинг статуса обновления или установки модуля
 *
 */
var pbxExtensionModuleModify = {
  $formObj: $('#pbx-extension-modify-form'),
  $backButton: $('#back-to-list-button'),
  $dropdown: $('#menu-group'),
  validateRules: {
    name: {
      identifier: 'caption',
      rules: [{
        type: 'empty',
        prompt: globalTranslate.ext_ValidateCaptionEmpty
      }]
    }
  },
  initialize: function () {
    function initialize() {
      $('#menu-group').dropdown();
      pbxExtensionModuleModify.initializeForm();
    }

    return initialize;
  }(),
  cbBeforeSendForm: function () {
    function cbBeforeSendForm(settings) {
      var result = settings;
      result.data = pbxExtensionModuleModify.$formObj.form('get values');
      return result;
    }

    return cbBeforeSendForm;
  }(),
  cbAfterSendForm: function () {
    function cbAfterSendForm() {
      window.location = window.location.href;
    }

    return cbAfterSendForm;
  }(),
  initializeForm: function () {
    function initializeForm() {
      Form.$formObj = pbxExtensionModuleModify.$formObj;
      Form.url = "".concat(globalRootUrl, "pbx-extension-modules/saveModuleSettings");
      Form.validateRules = pbxExtensionModuleModify.validateRules;
      Form.cbBeforeSendForm = pbxExtensionModuleModify.cbBeforeSendForm;
      Form.cbAfterSendForm = pbxExtensionModuleModify.cbAfterSendForm;
      Form.initialize();
    }

    return initializeForm;
  }()
};
$(document).ready(function () {
  pbxExtensionModuleModify.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9QYnhFeHRlbnNpb25Nb2R1bGVzL3BieC1leHRlbnNpb24tbW9kdWxlLW1vZGlmeS5qcyJdLCJuYW1lcyI6WyJwYnhFeHRlbnNpb25Nb2R1bGVNb2RpZnkiLCIkZm9ybU9iaiIsIiQiLCIkYmFja0J1dHRvbiIsIiRkcm9wZG93biIsInZhbGlkYXRlUnVsZXMiLCJuYW1lIiwiaWRlbnRpZmllciIsInJ1bGVzIiwidHlwZSIsInByb21wdCIsImdsb2JhbFRyYW5zbGF0ZSIsImV4dF9WYWxpZGF0ZUNhcHRpb25FbXB0eSIsImluaXRpYWxpemUiLCJkcm9wZG93biIsImluaXRpYWxpemVGb3JtIiwiY2JCZWZvcmVTZW5kRm9ybSIsInNldHRpbmdzIiwicmVzdWx0IiwiZGF0YSIsImZvcm0iLCJjYkFmdGVyU2VuZEZvcm0iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJGb3JtIiwidXJsIiwiZ2xvYmFsUm9vdFVybCIsImRvY3VtZW50IiwicmVhZHkiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTs7QUFFQTs7OztBQUlBLElBQU1BLHdCQUF3QixHQUFHO0FBQ2hDQyxFQUFBQSxRQUFRLEVBQUVDLENBQUMsQ0FBQyw0QkFBRCxDQURxQjtBQUVoQ0MsRUFBQUEsV0FBVyxFQUFFRCxDQUFDLENBQUMsc0JBQUQsQ0FGa0I7QUFHaENFLEVBQUFBLFNBQVMsRUFBRUYsQ0FBQyxDQUFDLGFBQUQsQ0FIb0I7QUFJaENHLEVBQUFBLGFBQWEsRUFBRTtBQUNkQyxJQUFBQSxJQUFJLEVBQUU7QUFDTEMsTUFBQUEsVUFBVSxFQUFFLFNBRFA7QUFFTEMsTUFBQUEsS0FBSyxFQUFFLENBQ047QUFDQ0MsUUFBQUEsSUFBSSxFQUFFLE9BRFA7QUFFQ0MsUUFBQUEsTUFBTSxFQUFFQyxlQUFlLENBQUNDO0FBRnpCLE9BRE07QUFGRjtBQURRLEdBSmlCO0FBZWhDQyxFQUFBQSxVQWZnQztBQUFBLDBCQWVuQjtBQUNaWCxNQUFBQSxDQUFDLENBQUMsYUFBRCxDQUFELENBQWlCWSxRQUFqQjtBQUNBZCxNQUFBQSx3QkFBd0IsQ0FBQ2UsY0FBekI7QUFDQTs7QUFsQitCO0FBQUE7QUFtQmhDQyxFQUFBQSxnQkFuQmdDO0FBQUEsOEJBbUJmQyxRQW5CZSxFQW1CTDtBQUMxQixVQUFNQyxNQUFNLEdBQUdELFFBQWY7QUFDQUMsTUFBQUEsTUFBTSxDQUFDQyxJQUFQLEdBQWNuQix3QkFBd0IsQ0FBQ0MsUUFBekIsQ0FBa0NtQixJQUFsQyxDQUF1QyxZQUF2QyxDQUFkO0FBQ0EsYUFBT0YsTUFBUDtBQUNBOztBQXZCK0I7QUFBQTtBQXdCaENHLEVBQUFBLGVBeEJnQztBQUFBLCtCQXdCZDtBQUNqQkMsTUFBQUEsTUFBTSxDQUFDQyxRQUFQLEdBQWtCRCxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLElBQWxDO0FBQ0E7O0FBMUIrQjtBQUFBO0FBMkJoQ1QsRUFBQUEsY0EzQmdDO0FBQUEsOEJBMkJmO0FBQ2hCVSxNQUFBQSxJQUFJLENBQUN4QixRQUFMLEdBQWdCRCx3QkFBd0IsQ0FBQ0MsUUFBekM7QUFDQXdCLE1BQUFBLElBQUksQ0FBQ0MsR0FBTCxhQUFjQyxhQUFkO0FBQ0FGLE1BQUFBLElBQUksQ0FBQ3BCLGFBQUwsR0FBcUJMLHdCQUF3QixDQUFDSyxhQUE5QztBQUNBb0IsTUFBQUEsSUFBSSxDQUFDVCxnQkFBTCxHQUF3QmhCLHdCQUF3QixDQUFDZ0IsZ0JBQWpEO0FBQ0FTLE1BQUFBLElBQUksQ0FBQ0osZUFBTCxHQUF1QnJCLHdCQUF3QixDQUFDcUIsZUFBaEQ7QUFDQUksTUFBQUEsSUFBSSxDQUFDWixVQUFMO0FBQ0E7O0FBbEMrQjtBQUFBO0FBQUEsQ0FBakM7QUFzQ0FYLENBQUMsQ0FBQzBCLFFBQUQsQ0FBRCxDQUFZQyxLQUFaLENBQWtCLFlBQU07QUFDdkI3QixFQUFBQSx3QkFBd0IsQ0FBQ2EsVUFBekI7QUFDQSxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIE1pa29QQlggLSBmcmVlIHBob25lIHN5c3RlbSBmb3Igc21hbGwgYnVzaW5lc3NcbiAqIENvcHlyaWdodCAoQykgMjAxNy0yMDIwIEFsZXhleSBQb3J0bm92IGFuZCBOaWtvbGF5IEJla2V0b3ZcbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnlcbiAqIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG4gKiAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICpcbiAqIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uXG4gKiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuICovXG5cbi8qIGdsb2JhbCBnbG9iYWxSb290VXJsLCBGb3JtLCBnbG9iYWxUcmFuc2xhdGUgKi9cblxuLyoqXG4gKiDQnNC+0L3QuNGC0L7RgNC40L3QsyDRgdGC0LDRgtGD0YHQsCDQvtCx0L3QvtCy0LvQtdC90LjRjyDQuNC70Lgg0YPRgdGC0LDQvdC+0LLQutC4INC80L7QtNGD0LvRj1xuICpcbiAqL1xuY29uc3QgcGJ4RXh0ZW5zaW9uTW9kdWxlTW9kaWZ5ID0ge1xuXHQkZm9ybU9iajogJCgnI3BieC1leHRlbnNpb24tbW9kaWZ5LWZvcm0nKSxcblx0JGJhY2tCdXR0b246ICQoJyNiYWNrLXRvLWxpc3QtYnV0dG9uJyksXG5cdCRkcm9wZG93bjogJCgnI21lbnUtZ3JvdXAnKSxcblx0dmFsaWRhdGVSdWxlczoge1xuXHRcdG5hbWU6IHtcblx0XHRcdGlkZW50aWZpZXI6ICdjYXB0aW9uJyxcblx0XHRcdHJ1bGVzOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiAnZW1wdHknLFxuXHRcdFx0XHRcdHByb21wdDogZ2xvYmFsVHJhbnNsYXRlLmV4dF9WYWxpZGF0ZUNhcHRpb25FbXB0eSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSxcblx0fSxcblx0aW5pdGlhbGl6ZSgpIHtcblx0XHQkKCcjbWVudS1ncm91cCcpLmRyb3Bkb3duKCk7XG5cdFx0cGJ4RXh0ZW5zaW9uTW9kdWxlTW9kaWZ5LmluaXRpYWxpemVGb3JtKCk7XG5cdH0sXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRjb25zdCByZXN1bHQgPSBzZXR0aW5ncztcblx0XHRyZXN1bHQuZGF0YSA9IHBieEV4dGVuc2lvbk1vZHVsZU1vZGlmeS4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblx0Y2JBZnRlclNlbmRGb3JtKCkge1xuXHRcdHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHR9LFxuXHRpbml0aWFsaXplRm9ybSgpIHtcblx0XHRGb3JtLiRmb3JtT2JqID0gcGJ4RXh0ZW5zaW9uTW9kdWxlTW9kaWZ5LiRmb3JtT2JqO1xuXHRcdEZvcm0udXJsID0gYCR7Z2xvYmFsUm9vdFVybH1wYngtZXh0ZW5zaW9uLW1vZHVsZXMvc2F2ZU1vZHVsZVNldHRpbmdzYDtcblx0XHRGb3JtLnZhbGlkYXRlUnVsZXMgPSBwYnhFeHRlbnNpb25Nb2R1bGVNb2RpZnkudmFsaWRhdGVSdWxlcztcblx0XHRGb3JtLmNiQmVmb3JlU2VuZEZvcm0gPSBwYnhFeHRlbnNpb25Nb2R1bGVNb2RpZnkuY2JCZWZvcmVTZW5kRm9ybTtcblx0XHRGb3JtLmNiQWZ0ZXJTZW5kRm9ybSA9IHBieEV4dGVuc2lvbk1vZHVsZU1vZGlmeS5jYkFmdGVyU2VuZEZvcm07XG5cdFx0Rm9ybS5pbml0aWFsaXplKCk7XG5cdH0sXG59O1xuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0cGJ4RXh0ZW5zaW9uTW9kdWxlTW9kaWZ5LmluaXRpYWxpemUoKTtcbn0pO1xuIl19